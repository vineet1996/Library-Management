function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{dgmN:function(e,t,n){"use strict";n.r(t);var i,s,c=n("aceb"),o=n("vTDv"),r=n("tyNb"),a=[{title:"Library",icon:{icon:"book",pack:"solid"},link:"/pages/library",home:!0},{title:"Issue List",icon:{icon:"list-ul",pack:"solid"},link:"/pages/issue"}],b=n("JWHN"),u=n("wvd9"),l=n("fXoL"),d=n("mgFL"),h=((i=function(){function e(t,n,i){_classCallCheck(this,e),this.authService=t,this.router=n,this.issueService=i,this.menu=a}return _createClass(e,[{key:"ngOnInit",value:function(){this.issueService.setupSocketConnection(),this.issueService.joinRoom(this.authService.currentUserValue),this.authService.isAdmin?this.adminSocketsSubscribes():this.userSocketsSubscribes()}},{key:"adminSocketsSubscribes",value:function(){var e=this;this.issueService.updatedReqList().subscribe((function(t){switch(e.issueService.adminIssueList.next(t.result),t.type){case"new":e.issueService.showToast("primary","Book Issue request","New Request");break;case"approval":e.issueService.showToast("success","Approval status","Submitted successfully");break;case"delete":e.issueService.showToast("warning","Request List is updated","Check updated list");break;case"return":e.issueService.showToast("primary","Return book request","Request")}}))}},{key:"userSocketsSubscribes",value:function(){var e=this;this.issueService.userUpdatedReqList().subscribe((function(t){switch(e.issueService.userIssueList.next(t.result),t.type){case"new":e.issueService.showToast("success","Book Issue","Request Sent");break;case"delete":e.issueService.showToast("success","Deleted Request","Successfull");break;case"return":e.issueService.showToast("success","Return Request","Successfull")}})),this.issueService.approvalReceiveUser().subscribe((function(t){e.issueService.userIssueList.next(t.toUserReqList),t.approval?e.issueService.showToast("success",t.return?"Return Book is approved":"Book issue is approved","successfull"):e.issueService.showToast("warning","Book is declined","Rejected")}))}}]),e}()).\u0275fac=function(e){return new(e||i)(l.Qb(b.a),l.Qb(r.c),l.Qb(u.a))},i.\u0275cmp=l.Kb({type:i,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(l.Wb(0,"ngx-one-column-layout"),l.Rb(1,"nb-menu",0),l.Rb(2,"router-outlet"),l.Vb()),2&e&&(l.Eb(1),l.mc("items",t.menu))},directives:[d.a,c.U,r.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),i),m=n("w+5F"),g=((s=function(){function e(t){_classCallCheck(this,e),this.ref=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(e){this.ref.close(e)}}]),e}()).\u0275fac=function(e){return new(e||s)(l.Qb(c.B))},s.\u0275cmp=l.Kb({type:s,selectors:[["ngx-alert-dialog"]],inputs:{title:"title"},decls:9,vars:1,consts:[["align","right"],["nbButton","","status","danger","size","small",1,"cancel",3,"click"],["nbButton","","status","success","size","small",3,"click"]],template:function(e,t){1&e&&(l.Wb(0,"nb-card"),l.Wb(1,"nb-card-body"),l.Wb(2,"div"),l.Bc(3),l.Vb(),l.Vb(),l.Wb(4,"nb-card-footer",0),l.Wb(5,"button",1),l.ec("click",(function(){return t.cancel(!1)})),l.Bc(6,"Cancel"),l.Vb(),l.Wb(7,"button",2),l.ec("click",(function(){return t.cancel(!0)})),l.Bc(8,"Yes"),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Eb(3),l.Cc(t.title))},directives:[c.q,c.p,c.r,c.n],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),s),f=n("3Pt+"),p=n("ofXK");function v(e,t){if(1&e){var n=l.Xb();l.Wb(0,"nb-card-body"),l.Wb(1,"div",8),l.Wb(2,"label",9),l.Bc(3,"Name"),l.Vb(),l.Wb(4,"div",10),l.Wb(5,"input",11),l.ec("ngModelChange",(function(e){return l.tc(n),l.gc().updatingUserData.name=e})),l.Vb(),l.Vb(),l.Vb(),l.Wb(6,"div",8),l.Wb(7,"label",12),l.Bc(8,"Email"),l.Vb(),l.Wb(9,"div",10),l.Wb(10,"input",13),l.ec("ngModelChange",(function(e){return l.tc(n),l.gc().updatingUserData.email=e})),l.Vb(),l.Vb(),l.Vb(),l.Wb(11,"div",8),l.Wb(12,"label",14),l.Bc(13,"Mobile"),l.Vb(),l.Wb(14,"div",10),l.Wb(15,"input",15),l.ec("ngModelChange",(function(e){return l.tc(n),l.gc().updatingUserData.mobile=e})),l.Vb(),l.Vb(),l.Vb(),l.Wb(16,"div",8),l.Wb(17,"label",16),l.Bc(18,"Gender"),l.Vb(),l.Wb(19,"div",10),l.Wb(20,"input",17),l.ec("ngModelChange",(function(e){return l.tc(n),l.gc().updatingUserData.gender=e})),l.Vb(),l.Vb(),l.Vb(),l.Wb(21,"div",8),l.Wb(22,"label",18),l.Bc(23,"Membership (In days)"),l.Vb(),l.Wb(24,"div",10),l.Wb(25,"input",19),l.ec("ngModelChange",(function(e){return l.tc(n),l.gc().updatingUserData.membershipdays=e})),l.Vb(),l.Vb(),l.Vb(),l.Wb(26,"div",8),l.Wb(27,"label",20),l.Bc(28,"Reading Hours (In hrs)"),l.Vb(),l.Wb(29,"div",10),l.Wb(30,"input",21),l.ec("ngModelChange",(function(e){return l.tc(n),l.gc().updatingUserData.readinghours=e})),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=l.gc();l.Eb(5),l.mc("ngModel",i.updatingUserData.name),l.Eb(5),l.mc("ngModel",i.updatingUserData.email),l.Eb(5),l.mc("ngModel",i.updatingUserData.mobile),l.Eb(5),l.mc("ngModel",i.updatingUserData.gender),l.Eb(5),l.mc("ngModel",i.updatingUserData.membershipdays),l.Eb(5),l.mc("ngModel",i.updatingUserData.readinghours)}}function k(e,t){1&e&&(l.Ub(0),l.Wb(1,"p",27),l.Bc(2," Password does not match! "),l.Vb(),l.Tb())}function W(e,t){if(1&e){var n=l.Xb();l.Wb(0,"nb-card-body"),l.Wb(1,"form",22),l.ec("ngSubmit",(function(){return l.tc(n),l.gc().setPassword()})),l.Wb(2,"div",8),l.Wb(3,"label",23),l.Bc(4,"New Password"),l.Vb(),l.Wb(5,"div",10),l.Rb(6,"input",24),l.Vb(),l.Vb(),l.Wb(7,"div",8),l.Wb(8,"label",25),l.Bc(9,"Re-type Password"),l.Vb(),l.Wb(10,"div",10),l.Rb(11,"input",26),l.zc(12,k,3,0,"ng-container",3),l.Vb(),l.Vb(),l.Vb(),l.Bc(13,"\xa0 "),l.Vb()}if(2&e){var i=l.gc();l.Eb(1),l.mc("formGroup",i.myForm),l.Eb(11),l.mc("ngIf",i.myForm.hasError("notMatch","retypeNew"))}}var C,V,y=((C=function(){function e(t,n,i,s){var c=this;_classCallCheck(this,e),this.authService=t,this.issueService=n,this.formBuilder=i,this.dialogService=s,this.myForm=this.formBuilder.group({newPassword:["",[f.r.required]],retypeNew:[""]}),this.myForm.get("retypeNew").valueChanges.subscribe((function(e){e&&(e!=c.myForm.get("newPassword").value&&c.myForm.get("retypeNew").setErrors({notMatch:!0}),e==c.myForm.get("newPassword").value&&c.myForm.get("retypeNew").setErrors({doesMatch:!0}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUserDets()}},{key:"getUserDets",value:function(){var e=this;this.authService.getUserDets().subscribe((function(t){e.updatingUserData=t,e.myForm.addControl("_id",e.formBuilder.control(t._id))}))}},{key:"updateDetails",value:function(){var e=this;this.dialogService.open(g,{context:{title:"Are you sure want to update details ?"}}).onClose.subscribe((function(t){t&&e.authService.userUpdateDetails(e.updatingUserData).subscribe((function(t){e.updatingUserData=t,e.issueService.showToast("success","Updated Details","Successful")}))}))}},{key:"passwordReset",value:function(){var e=this;this.dialogService.open(g,{context:{title:"Are you sure want to update details ?"}}).onClose.subscribe((function(t){t&&e.authService.userpasswordReset(e.myForm.value).subscribe((function(t){e.issueService.showToast("success","Updated Password","Successful")}))}))}}]),e}()).\u0275fac=function(e){return new(e||C)(l.Qb(b.a),l.Qb(u.a),l.Qb(f.b),l.Qb(c.C))},C.\u0275cmp=l.Kb({type:C,selectors:[["ngx-profile"]],decls:19,vars:3,consts:[[1,"row"],[1,"col-sm-7"],[1,"heading"],[4,"ngIf"],["align","right"],["nbButton","","status","success","size","small",3,"click"],[1,"col-sm-5"],["nbButton","","status","success","size","small",3,"disabled","click"],[1,"form-group","row"],["for","inputName",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","nbInput","","fullWidth","","id","inputName",3,"ngModel","ngModelChange"],["for","inputEmail1",1,"label","col-sm-3","col-form-label"],["type","email","nbInput","","fullWidth","","id","inputEmail1",3,"ngModel","ngModelChange"],["for","inputMobile",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputMobile",3,"ngModel","ngModelChange"],["for","inputGender",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputGender","disabled","",3,"ngModel","ngModelChange"],["for","inputMember",1,"label","col-sm-3","col-form-label"],["type","number","nbInput","","fullWidth","","id","inputMember","disabled","",3,"ngModel","ngModelChange"],["for","inputRead",1,"label","col-sm-3","col-form-label"],["type","number","min","1","max","7","nbInput","","fullWidth","","id","inputRead","disabled","",3,"ngModel","ngModelChange"],["aria-labelledby","title",3,"formGroup","ngSubmit"],["for","inputpass",1,"label","col-sm-3","col-form-label"],["type","password","formControlName","newPassword","nbInput","","fullWidth","","id","inputpass"],["for","inputRepass",1,"label","col-sm-3","col-form-label"],["type","password","formControlName","retypeNew","nbInput","","fullWidth","","id","inputRepass"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"nb-card"),l.Wb(3,"nb-card-header"),l.Wb(4,"div",2),l.Bc(5,"Profile Details"),l.Vb(),l.Vb(),l.zc(6,v,31,6,"nb-card-body",3),l.Wb(7,"nb-card-footer",4),l.Wb(8,"button",5),l.ec("click",(function(){return t.updateDetails()})),l.Bc(9,"Update"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(10,"div",6),l.Wb(11,"nb-card"),l.Wb(12,"nb-card-header"),l.Wb(13,"div",2),l.Bc(14,"Password Change"),l.Vb(),l.Vb(),l.zc(15,W,14,2,"nb-card-body",3),l.Wb(16,"nb-card-footer",4),l.Wb(17,"button",7),l.ec("click",(function(){return t.passwordReset()})),l.Bc(18,"Password Change"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Eb(6),l.mc("ngIf",t.updatingUserData),l.Eb(9),l.mc("ngIf",t.updatingUserData),l.Eb(2),l.mc("disabled",!t.myForm.hasError("doesMatch","retypeNew")))},directives:[c.q,c.s,p.m,c.r,c.n,c.p,c.H,f.a,f.j,f.m,f.n,f.s,f.k,f.d,f.c],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.heading[_ngcontent-%COMP%]{font-size:17px;text-transform:uppercase;text-align:center}"]}),C),M=n("tk/3"),B=((V=function(){function e(t){_classCallCheck(this,e),this.http=t,this.httpOptions={headers:new M.e({"Content-Type":"application/json"})}}return _createClass(e,[{key:"createBook",value:function(e){return this.http.post("/book/createBook",e,this.httpOptions)}},{key:"getAllBooks",value:function(){return this.http.get("/book/getBooks")}},{key:"updateBook",value:function(e){return this.http.post("/book/updateBook",e,this.httpOptions)}},{key:"deleteBook",value:function(e){return this.http.post("/book/deleteBook",e,this.httpOptions)}},{key:"getSearchResults",value:function(e){return this.http.get(e?"/book/searchResult/".concat(e):"/book/getBooks")}}]),e}()).\u0275fac=function(e){return new(e||V)(l.ac(M.b))},V.\u0275prov=l.Mb({token:V,factory:V.\u0275fac,providedIn:"root"}),V);function w(e,t){1&e&&(l.Wb(0,"span"),l.Bc(1,"Create"),l.Vb())}function O(e,t){1&e&&l.Bc(0,"Update")}var _,P=((_=function(){function e(t,n){_classCallCheck(this,e),this.ref=t,this.formBuilder=n,this.bookForm=this.formBuilder.group({name:["",[f.r.required]],author:["",[f.r.required]],publish:["",[f.r.required]],stock:["",[f.r.required]],takehome:[!1]})}return _createClass(e,[{key:"ngOnInit",value:function(){"Update"==this.type&&(this.bookForm.setValue({name:this.data.name,author:this.data.author,publish:this.data.publish,stock:this.data.stock,takehome:this.data.takehome}),this.bookForm.addControl("id",this.formBuilder.control(this.data._id)))}},{key:"cancel",value:function(){this.ref.close()}},{key:"addBook",value:function(){this.bookForm.valid&&this.ref.close(this.bookForm.value)}}]),e}()).\u0275fac=function(e){return new(e||_)(l.Qb(c.B),l.Qb(f.b))},_.\u0275cmp=l.Kb({type:_,selectors:[["ngx-add-book"]],inputs:{type:"type",data:"data"},decls:37,vars:3,consts:[["size","medium"],[3,"formGroup"],[1,"form-group","row"],["for","inputname",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","nbInput","","fullWidth","","id","inputname","formControlName","name","placeholder","name"],["for","inputauthor",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputauthor","formControlName","author","placeholder","Kelly Rimmer "],["for","inputpublish",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputpublish","formControlName","publish","placeholder","2019 Harlequin Enterprises, Limited"],["for","inputstock",1,"label","col-sm-3","col-form-label"],["type","number","nbInput","","fullWidth","","id","inputstock","formControlName","stock","min","1"],[1,"col-sm-3","label"],["formControlName","takehome"],["align","right"],["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"],[4,"ngIf","ngIfElse"],["updateBtn",""]],template:function(e,t){if(1&e&&(l.Wb(0,"nb-card",0),l.Wb(1,"nb-card-header"),l.Bc(2,"New Book Details"),l.Vb(),l.Wb(3,"nb-card-body"),l.Wb(4,"form",1),l.Wb(5,"div",2),l.Wb(6,"label",3),l.Bc(7,"Name"),l.Vb(),l.Wb(8,"div",4),l.Rb(9,"input",5),l.Vb(),l.Vb(),l.Wb(10,"div",2),l.Wb(11,"label",6),l.Bc(12,"Author"),l.Vb(),l.Wb(13,"div",4),l.Rb(14,"input",7),l.Vb(),l.Vb(),l.Wb(15,"div",2),l.Wb(16,"label",8),l.Bc(17,"Publish"),l.Vb(),l.Wb(18,"div",4),l.Rb(19,"input",9),l.Vb(),l.Vb(),l.Wb(20,"div",2),l.Wb(21,"label",10),l.Bc(22,"Stock"),l.Vb(),l.Wb(23,"div",4),l.Rb(24,"input",11),l.Vb(),l.Vb(),l.Wb(25,"div",2),l.Wb(26,"label",12),l.Bc(27,"Take home"),l.Vb(),l.Wb(28,"div",4),l.Rb(29,"nb-checkbox",13),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(30,"nb-card-footer",14),l.Wb(31,"button",15),l.ec("click",(function(){return t.cancel()})),l.Bc(32,"Cancel"),l.Vb(),l.Wb(33,"button",16),l.ec("click",(function(){return t.addBook()})),l.zc(34,w,2,0,"span",17),l.Vb(),l.zc(35,O,1,0,"ng-template",null,18,l.Ac),l.Vb(),l.Vb()),2&e){var n=l.rc(36);l.Eb(4),l.mc("formGroup",t.bookForm),l.Eb(30),l.mc("ngIf","New"==t.type)("ngIfElse",n)}},directives:[c.q,c.s,c.p,f.s,f.k,f.d,c.H,f.a,f.j,f.c,f.n,c.v,c.r,c.n,p.m],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),_);function I(e,t){1&e&&(l.Wb(0,"nb-alert",7),l.Bc(1,"No search results. "),l.Vb())}function S(e,t){if(1&e){var n=l.Xb();l.Wb(0,"div",10),l.Wb(1,"nb-card",11),l.Wb(2,"nb-card-header",12),l.Wb(3,"h6"),l.Bc(4),l.Vb(),l.Vb(),l.Wb(5,"nb-card-body"),l.Wb(6,"div",13),l.Wb(7,"label",14),l.Bc(8,"Author"),l.Vb(),l.Wb(9,"div",15),l.Bc(10),l.Vb(),l.Vb(),l.Wb(11,"div",13),l.Wb(12,"label",14),l.Bc(13,"Publish"),l.Vb(),l.Wb(14,"div",15),l.Bc(15),l.Vb(),l.Vb(),l.Wb(16,"div",13),l.Wb(17,"label",14),l.Bc(18,"Stock"),l.Vb(),l.Wb(19,"div",15),l.Bc(20),l.Vb(),l.Vb(),l.Wb(21,"div",13),l.Wb(22,"label",14),l.Bc(23,"Take Home"),l.Vb(),l.Wb(24,"div",15),l.Rb(25,"nb-checkbox",16),l.Vb(),l.Vb(),l.Vb(),l.Wb(26,"nb-card-footer",17),l.Wb(27,"button",18),l.ec("click",(function(){l.tc(n);var e=t.$implicit;return l.gc(2).updateBook(e)})),l.Bc(28,"Update"),l.Vb(),l.Wb(29,"button",19),l.ec("click",(function(){l.tc(n);var e=t.$implicit;return l.gc(2).deleteBook(e)})),l.Bc(30,"Delete"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=t.$implicit;l.Eb(4),l.Cc(i.name),l.Eb(6),l.Cc(i.author),l.Eb(5),l.Cc(i.publish),l.Eb(5),l.Cc(i.stock),l.Eb(5),l.mc("checked",i.takehome)}}function E(e,t){if(1&e&&(l.Wb(0,"div",8),l.zc(1,S,31,5,"div",9),l.Vb()),2&e){var n=l.gc();l.Eb(1),l.mc("ngForOf",n.booksList)}}var x,R=((x=function(){function e(t,n,i){_classCallCheck(this,e),this.dialogService=t,this.libraryService=n,this.toastrService=i,this.position=c.D.TOP_LEFT}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"addNewBook",value:function(){var e=this;this.dialogService.open(P,{context:{type:"New",data:""}}).onClose.subscribe((function(t){t&&e.libraryService.createBook(t).subscribe((function(t){e.booksList=t,e.showToast("success","New Book created","Successfull!")}))}))}},{key:"updateBook",value:function(e){var t=this;this.dialogService.open(P,{context:{type:"Update",data:e}}).onClose.subscribe((function(e){e&&t.libraryService.updateBook(e).subscribe((function(e){t.booksList=e,t.showToast("success","Updated","Successfull!")}))}))}},{key:"deleteBook",value:function(e){var t=this;this.dialogService.open(g,{context:{title:'Are you Sure want to delete book "'+e.name+'" ?'}}).onClose.subscribe((function(n){n&&t.libraryService.deleteBook(e).subscribe((function(e){t.booksList=e,t.showToast("success","Deleted","Successfull!")}))}))}},{key:"showToast",value:function(e,t,n){this.toastrService.show(n,t,{status:e,destroyByClick:!0,duration:3e3,hasIcon:!0,position:this.position,preventDuplicates:!1})}},{key:"searchText",value:function(e){var t=this;this.libraryService.getSearchResults(e.target.value).subscribe((function(e){t.booksList=e}))}}]),e}()).\u0275fac=function(e){return new(e||x)(l.Qb(c.C),l.Qb(B),l.Qb(c.ib))},x.\u0275cmp=l.Kb({type:x,selectors:[["ngx-admin-library"]],inputs:{booksList:"booksList"},decls:11,vars:2,consts:[[1,"row"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","placeholder","Type here to search...",3,"keyup"],[1,"col-sm-2"],["nbButton","","status","primary",3,"click"],["outline","warning","style","margin: 0;",4,"ngIf"],["class","row col-sm-12","style","height: 67vh;overflow: scroll;",4,"ngIf"],["outline","warning",2,"margin","0"],[1,"row","col-sm-12",2,"height","67vh","overflow","scroll"],["class","col-sm-4",4,"ngFor","ngForOf"],[1,"col-sm-4"],[2,"height","30vh"],[2,"text-align","center"],[1,"form-group","row"],["for","inputname",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["disabled","",3,"checked"],["align","right"],["nbButton","","status","success","size","small",1,"cancel",3,"click"],["nbButton","","status","danger","size","small",3,"click"]],template:function(e,t){1&e&&(l.Wb(0,"nb-card"),l.Wb(1,"nb-card-header"),l.Wb(2,"div",0),l.Wb(3,"div",1),l.Wb(4,"input",2),l.ec("keyup",(function(e){return t.searchText(e)})),l.Vb(),l.Vb(),l.Wb(5,"div",3),l.Wb(6,"button",4),l.ec("click",(function(){return t.addNewBook()})),l.Bc(7,"Add Book"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"nb-card-body"),l.zc(9,I,2,0,"nb-alert",5),l.Vb(),l.Vb(),l.zc(10,E,2,1,"div",6)),2&e&&(l.Eb(9),l.mc("ngIf",0==t.booksList.length),l.Eb(1),l.mc("ngIf",t.booksList.length>0))},directives:[c.q,c.s,c.H,c.n,c.p,p.m,c.j,p.l,c.v,c.r],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),x),D=n("mrSG"),L=n("wd/R");function q(e,t){1&e&&(l.Wb(0,"nb-alert",6),l.Bc(1,"Your Membership is expiring in 5 days."),l.Vb())}function z(e,t){1&e&&(l.Wb(0,"nb-alert",6),l.Bc(1,"No search results. "),l.Vb())}function H(e,t){1&e&&l.Rb(0,"nb-badge",17)}function U(e,t){if(1&e){var n=l.Xb();l.Wb(0,"button",18),l.ec("click",(function(){l.tc(n);var e=l.gc().$implicit;return l.gc().issueBook(e,!0)})),l.Bc(1,"Take Home"),l.Vb()}if(2&e){var i=l.gc().$implicit;l.mc("disabled",0==i.stock)}}function A(e,t){if(1&e){var n=l.Xb();l.Wb(0,"div",7),l.Wb(1,"nb-card",8),l.Wb(2,"nb-card-header",9),l.zc(3,H,1,0,"nb-badge",10),l.Wb(4,"h6"),l.Bc(5),l.Vb(),l.Vb(),l.Wb(6,"nb-card-body"),l.Wb(7,"div",11),l.Wb(8,"label",12),l.Bc(9,"Author"),l.Vb(),l.Wb(10,"div",13),l.Bc(11),l.Vb(),l.Vb(),l.Wb(12,"div",11),l.Wb(13,"label",12),l.Bc(14,"Publish"),l.Vb(),l.Wb(15,"div",13),l.Bc(16),l.Vb(),l.Vb(),l.Wb(17,"div",11),l.Wb(18,"label",12),l.Bc(19,"Stock"),l.Vb(),l.Wb(20,"div",13),l.Bc(21),l.Vb(),l.Vb(),l.Vb(),l.Wb(22,"nb-card-footer",14),l.zc(23,U,2,1,"button",15),l.Wb(24,"button",16),l.ec("click",(function(){l.tc(n);var e=t.$implicit;return l.gc().issueBook(e,!1)})),l.Bc(25,"Read"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=t.$implicit;l.Eb(3),l.mc("ngIf",0==i.stock),l.Eb(2),l.Cc(i.name),l.Eb(6),l.Cc(i.author),l.Eb(5),l.Cc(i.publish),l.Eb(5),l.Cc(i.stock),l.Eb(2),l.mc("ngIf",i.takehome),l.Eb(1),l.mc("disabled",0==i.stock)}}var T,Y=((T=function(){function e(t,n,i,s){_classCallCheck(this,e),this.dialogService=t,this.issueService=n,this.libraryService=i,this.authService=s,this.userData=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userData=this.authService.currentUserValue,this.authService.reduceMemberShipDays(),this.authService.currentUserSubject.subscribe((function(t){t&&(e.membershipDays=t.membership)}))}},{key:"issueBook",value:function(e,t){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.checktime();case 2:if(!n.sent){n.next=6;break}t?this.membershipDays>5?this.issueFuntion(e,t):this.issueService.showToast("warning","Your membership is expiring","Request Cancelled"):this.issueFuntion(e,t),n.next=7;break;case 6:this.issueService.showToast("danger","Issue Time 10:00 AM to 03:00 PM","Request Cancelled");case 7:case"end":return n.stop()}}),n,this)})))}},{key:"issueFuntion",value:function(e,t){var n=this,i='Request book "'+e.name+'" to read ?';t&&(i='Request book "'+e.name+'" to take home ?'),this.dialogService.open(g,{context:{title:i}}).onClose.subscribe((function(i){i&&n.issueService.requestIssue({userId:n.userData.id,takeHome:t,bookId:e._id})}))}},{key:"checktime",value:function(){var e=L().format(),t=L("10:00","HH:mm").format(),n=L("15:00","HH:mm").format();return L(e).isBetween(t,n)}},{key:"searchText",value:function(e){var t=this;this.libraryService.getSearchResults(e.target.value).subscribe((function(e){t.booksList=e}))}}]),e}()).\u0275fac=function(e){return new(e||T)(l.Qb(c.C),l.Qb(u.a),l.Qb(B),l.Qb(b.a))},T.\u0275cmp=l.Kb({type:T,selectors:[["ngx-user-library"]],inputs:{booksList:"booksList"},decls:10,vars:3,consts:[[1,"row","col-sm-12"],[1,"col-sm-12"],["type","text","nbInput","","fullWidth","","placeholder","Type here to search...",3,"keyup"],["outline","warning","style","margin: 0;",4,"ngIf"],[1,"row","col-sm-12",2,"height","67vh","overflow","scroll"],["class","col-sm-4",4,"ngFor","ngForOf"],["outline","warning",2,"margin","0"],[1,"col-sm-4"],[2,"height","30vh"],[2,"text-align","center"],["text","Out of stock","status","danger","position","top right",4,"ngIf"],[1,"form-group","row"],["for","inputname",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["align","right"],["class","cancel","nbButton","","status","success","size","small",3,"disabled","click",4,"ngIf"],["nbButton","","status","primary","size","small",3,"disabled","click"],["text","Out of stock","status","danger","position","top right"],["nbButton","","status","success","size","small",1,"cancel",3,"disabled","click"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"nb-card"),l.Wb(3,"nb-card-header"),l.Wb(4,"input",2),l.ec("keyup",(function(e){return t.searchText(e)})),l.Vb(),l.Vb(),l.Wb(5,"nb-card-body"),l.zc(6,q,2,0,"nb-alert",3),l.zc(7,z,2,0,"nb-alert",3),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",4),l.zc(9,A,26,7,"div",5),l.Vb(),l.Vb()),2&e&&(l.Eb(6),l.mc("ngIf",t.membershipDays&&5>t.membershipDays),l.Eb(1),l.mc("ngIf",0==t.booksList.length),l.Eb(2),l.mc("ngForOf",t.booksList))},directives:[c.q,c.s,c.H,c.p,p.m,p.l,c.j,c.r,c.n,c.l],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),T);function F(e,t){if(1&e&&(l.Ub(0),l.Rb(1,"ngx-admin-library",2),l.Tb()),2&e){var n=l.gc();l.Eb(1),l.mc("booksList",n.allBooks)}}function N(e,t){if(1&e&&l.Rb(0,"ngx-user-library",2),2&e){var n=l.gc();l.mc("booksList",n.allBooks)}}var Q,$=((Q=function(){function e(t,n,i){_classCallCheck(this,e),this.authService=t,this.libraryService=n,this.issueService=i,this.allBooks=[],this.isadmin=!1,this.authService.isAdmin&&(this.isadmin=!0)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getLibrary(),this.issueService.updateAllUsers().subscribe((function(t){e.getLibrary()}))}},{key:"getLibrary",value:function(){var e=this;this.libraryService.getAllBooks().subscribe((function(t){e.allBooks=t}))}}]),e}()).\u0275fac=function(e){return new(e||Q)(l.Qb(b.a),l.Qb(B),l.Qb(u.a))},Q.\u0275cmp=l.Kb({type:Q,selectors:[["ngx-library"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notAdmin",""],[3,"booksList"]],template:function(e,t){if(1&e&&(l.zc(0,F,2,1,"ng-container",0),l.zc(1,N,1,1,"ng-template",null,1,l.Ac)),2&e){var n=l.rc(2);l.mc("ngIf",t.isadmin)("ngIfElse",n)}},directives:[p.m,R,Y],styles:[""]}),Q);function X(e,t){1&e&&(l.Wb(0,"nb-alert",6),l.Bc(1,"No pending request! "),l.Vb())}function j(e,t){1&e&&(l.Wb(0,"span"),l.Rb(1,"nb-icon",19),l.Vb())}function K(e,t){1&e&&(l.Wb(0,"span"),l.Bc(1,"Issue"),l.Vb())}function G(e,t){if(1&e){var n=l.Xb();l.Wb(0,"button",20),l.ec("click",(function(){l.tc(n);var e=l.gc().$implicit;return l.gc(2).approvalBook(e,!1)})),l.Rb(1,"nb-icon",21),l.Vb()}}function J(e,t){if(1&e){var n=l.Xb();l.Wb(0,"tr",12),l.Wb(1,"td",13),l.Bc(2),l.Vb(),l.Wb(3,"td",13),l.Bc(4),l.Vb(),l.Wb(5,"td",13),l.zc(6,j,2,0,"span",14),l.Vb(),l.Wb(7,"td",13),l.zc(8,K,2,0,"span",14),l.Vb(),l.Wb(9,"td",13),l.Wb(10,"div",15),l.zc(11,G,2,0,"button",16),l.Wb(12,"button",17),l.ec("click",(function(){l.tc(n);var e=t.$implicit;return l.gc(2).approvalBook(e,!0)})),l.Rb(13,"nb-icon",18),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=t.$implicit;l.gc();var s=l.rc(14),c=l.rc(16);l.Eb(2),l.Cc(i.user.username),l.Eb(2),l.Cc(i.book.name),l.Eb(2),l.mc("ngIf",i.takehome)("ngIfElse",s),l.Eb(2),l.mc("ngIf",i.pending)("ngIfElse",c),l.Eb(3),l.mc("ngIf",i.pending)}}function Z(e,t){1&e&&l.Rb(0,"nb-icon",22)}function ee(e,t){1&e&&l.Bc(0,"Return")}function te(e,t){if(1&e&&(l.Wb(0,"table",7),l.Wb(1,"tr"),l.Wb(2,"th",8),l.Bc(3,"User"),l.Vb(),l.Wb(4,"th",8),l.Bc(5,"Book"),l.Vb(),l.Wb(6,"th",8),l.Bc(7,"Take Home"),l.Vb(),l.Wb(8,"th",8),l.Bc(9,"type"),l.Vb(),l.Wb(10,"th",8),l.Bc(11,"Action"),l.Vb(),l.Vb(),l.zc(12,J,14,7,"tr",9),l.zc(13,Z,1,0,"ng-template",null,10,l.Ac),l.zc(15,ee,1,0,"ng-template",null,11,l.Ac),l.Vb()),2&e){var n=l.gc();l.Eb(12),l.mc("ngForOf",n.requestList)}}function ne(e,t){1&e&&(l.Wb(0,"nb-alert",6),l.Bc(1,"No issued list! "),l.Vb())}function ie(e,t){1&e&&(l.Wb(0,"span"),l.Rb(1,"nb-icon",19),l.Vb())}function se(e,t){1&e&&(l.Wb(0,"span"),l.Rb(1,"nb-icon",19),l.Vb())}function ce(e,t){if(1&e&&(l.Wb(0,"span"),l.Bc(1),l.Vb()),2&e){var n=l.gc().$implicit;l.Eb(1),l.Cc(n.issuedtime)}}function oe(e,t){if(1&e&&(l.Wb(0,"span"),l.Bc(1),l.Vb()),2&e){var n=l.gc().$implicit;l.Eb(1),l.Cc(n.returntime)}}function re(e,t){if(1&e&&(l.Wb(0,"tr",12),l.Wb(1,"td",13),l.Bc(2),l.Vb(),l.Wb(3,"td",13),l.Bc(4),l.Vb(),l.Wb(5,"td",13),l.zc(6,ie,2,0,"span",14),l.Vb(),l.Wb(7,"td",13),l.zc(8,se,2,0,"span",14),l.Vb(),l.Wb(9,"td",13),l.zc(10,ce,2,1,"span",14),l.Vb(),l.Wb(11,"td",13),l.zc(12,oe,2,1,"span",14),l.Vb(),l.Vb()),2&e){var n=t.$implicit;l.gc();var i=l.rc(16),s=l.rc(18);l.Eb(2),l.Cc(n.user.username),l.Eb(2),l.Cc(n.book.name),l.Eb(2),l.mc("ngIf",n.takehome)("ngIfElse",i),l.Eb(2),l.mc("ngIf",n.approval)("ngIfElse",i),l.Eb(2),l.mc("ngIf",n.approval)("ngIfElse",s),l.Eb(2),l.mc("ngIf",n.returntime)("ngIfElse",s)}}function ae(e,t){1&e&&l.Rb(0,"nb-icon",22)}function be(e,t){1&e&&l.Bc(0,"-")}function ue(e,t){if(1&e&&(l.Wb(0,"table",7),l.Wb(1,"tr"),l.Wb(2,"th",8),l.Bc(3,"User"),l.Vb(),l.Wb(4,"th",8),l.Bc(5,"Book"),l.Vb(),l.Wb(6,"th",8),l.Bc(7,"Take Home"),l.Vb(),l.Wb(8,"th",8),l.Bc(9,"Approval"),l.Vb(),l.Wb(10,"th",8),l.Bc(11,"Issued Time"),l.Vb(),l.Wb(12,"th",8),l.Bc(13,"Returned Time"),l.Vb(),l.Vb(),l.zc(14,re,13,10,"tr",9),l.zc(15,ae,1,0,"ng-template",null,10,l.Ac),l.zc(17,be,1,0,"ng-template",null,23,l.Ac),l.Vb()),2&e){var n=l.gc();l.Eb(14),l.mc("ngForOf",n.issuedList)}}var le,de=((le=function(){function e(t,n){_classCallCheck(this,e),this.issueService=t,this.dialogService=n,this.requestList=[],this.issuedList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getAdminOldData(),this.issueService.adminIssueList.subscribe((function(t){t&&(e.requestList=t)})),this.issueService.updatedReqList().subscribe((function(t){e.getAdminOldData()}))}},{key:"approvalBook",value:function(e,t){var n=this,i="Accept the request of '"+e.book.name+"' by '"+e.user.username+"' ?";t||(i="Decline the request of '"+e.book.name+"' by '"+e.user.username+"' ?"),e.returnrequest&&(i="Accept return request of '"+e.book.name+"' by '"+e.user.username+"' ?"),this.dialogService.open(g,{context:{title:i}}).onClose.subscribe((function(i){if(i){var s={issueDets:e,approval:t,returnreq:!1};e.returnrequest&&(s.returnreq=!0),n.issueService.approvalByAdmin(s)}}))}},{key:"getAdminOldData",value:function(){var e=this;this.issueService.getAdminAllOldData().subscribe((function(t){e.issuedList=t,e.filterData()}))}},{key:"filterData",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,s=this.issuedList[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var c=i.value;c.requesttime=L(c.requesttime).format("YYYY-MM-DD (HH:mm)"),c.issuedtime=L(c.issuedtime).format("YYYY-MM-DD (HH:mm)"),c.returntime&&(c.returntime=L(c.returntime).format("YYYY-MM-DD (HH:mm)"))}}catch(o){t=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}}}]),e}()).\u0275fac=function(e){return new(e||le)(l.Qb(u.a),l.Qb(c.C))},le.\u0275cmp=l.Kb({type:le,selectors:[["ngx-admin-issue"]],decls:17,vars:4,consts:[[1,"row","col-sm-12"],[1,"col-sm-6"],[2,"height","80vh"],[1,"heading"],["outline","danger","style","margin: 0;",4,"ngIf"],["class","issuetable","style","width: 100%;",4,"ngIf"],["outline","danger",2,"margin","0"],[1,"issuetable",2,"width","100%"],[1,"issueHead"],["class","eachIssue",4,"ngFor","ngForOf"],["printNo",""],["returnreq",""],[1,"eachIssue"],[1,"issueData"],[4,"ngIf","ngIfElse"],[2,"display","flex"],["nbButton","","status","danger","shape","round","ghost","",3,"click",4,"ngIf"],["nbButton","","status","success","shape","round","ghost","",3,"click"],["icon","check","pack","solid"],["icon","check","status","success","pack","solid"],["nbButton","","status","danger","shape","round","ghost","",3,"click"],["icon","times","pack","solid"],["icon","times","status","danger","pack","solid"],["noData",""]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"nb-card",2),l.Wb(3,"nb-card-header"),l.Wb(4,"div",3),l.Bc(5,"Request List"),l.Vb(),l.Vb(),l.Wb(6,"nb-card-body"),l.zc(7,X,2,0,"nb-alert",4),l.zc(8,te,17,1,"table",5),l.Vb(),l.Vb(),l.Vb(),l.Wb(9,"div",1),l.Wb(10,"nb-card",2),l.Wb(11,"nb-card-header"),l.Wb(12,"div",3),l.Bc(13,"Issued List"),l.Vb(),l.Vb(),l.Wb(14,"nb-card-body"),l.zc(15,ne,2,0,"nb-alert",4),l.zc(16,ue,19,1,"table",5),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Eb(7),l.mc("ngIf",0==t.requestList.length),l.Eb(1),l.mc("ngIf",t.requestList.length>0),l.Eb(7),l.mc("ngIf",0==t.issuedList.length),l.Eb(1),l.mc("ngIf",t.issuedList.length>0))},directives:[c.q,c.s,c.p,p.m,c.j,p.l,c.n,c.E],styles:[".heading[_ngcontent-%COMP%]{font-size:17px;text-transform:uppercase}.heading[_ngcontent-%COMP%], .tableHead[_ngcontent-%COMP%]{text-align:center}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%], .issuetable[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.09);border-collapse:collapse;margin-bottom:10px;width:auto}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%]{text-align:center;padding:15px}.full-width-field[_ngcontent-%COMP%]{width:100%}.eachIssue[_ngcontent-%COMP%]{cursor:pointer}.eachIssue[_ngcontent-%COMP%]:hover{background:hsla(0,0%,50.2%,.15);outline:1px solid #00f}"]}),le);function he(e,t){if(1&e&&(l.Wb(0,"span",4),l.Bc(1),l.Vb()),2&e){var n=l.gc();l.Eb(1),l.Dc("*Note: ",n.note,"")}}var me,ge=((me=function(){function e(t){_classCallCheck(this,e),this.ref=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(e){this.ref.close(e)}}]),e}()).\u0275fac=function(e){return new(e||me)(l.Qb(c.B))},me.\u0275cmp=l.Kb({type:me,selectors:[["ngx-return-alert"]],inputs:{title:"title",note:"note"},decls:10,vars:2,consts:[["class","noteClass",4,"ngIf"],["align","right"],["nbButton","","status","danger","size","small",1,"cancel",3,"click"],["nbButton","","status","success","size","small",3,"click"],[1,"noteClass"]],template:function(e,t){1&e&&(l.Wb(0,"nb-card"),l.Wb(1,"nb-card-body"),l.Wb(2,"div"),l.Bc(3),l.Vb(),l.zc(4,he,2,1,"span",0),l.Vb(),l.Wb(5,"nb-card-footer",1),l.Wb(6,"button",2),l.ec("click",(function(){return t.cancel(!1)})),l.Bc(7,"Cancel"),l.Vb(),l.Wb(8,"button",3),l.ec("click",(function(){return t.cancel(!0)})),l.Bc(9,"Yes"),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Eb(3),l.Cc(t.title),l.Eb(1),l.mc("ngIf",t.note))},directives:[c.q,c.p,p.m,c.r,c.n],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.noteClass[_ngcontent-%COMP%]{color:red;font-size:12px}"]}),me);function fe(e,t){1&e&&(l.Wb(0,"nb-alert",11),l.Bc(1,"No pending request! "),l.Vb())}function pe(e,t){if(1&e){var n=l.Xb();l.Wb(0,"button",16),l.ec("click",(function(){l.tc(n);var e=l.gc().$implicit;return l.gc().deleteRequest(e)})),l.Rb(1,"nb-icon",17),l.Vb()}}function ve(e,t){1&e&&(l.Wb(0,"button",18),l.Bc(1,"Pending"),l.Vb())}function ke(e,t){if(1&e&&(l.Wb(0,"nb-list-item"),l.Wb(1,"div",4),l.Wb(2,"div",12),l.Bc(3),l.Vb(),l.Wb(4,"div",13),l.zc(5,pe,2,0,"button",14),l.zc(6,ve,2,0,"button",15),l.Vb(),l.Vb(),l.Vb()),2&e){var n=t.$implicit;l.Eb(3),l.Cc(n.book.name),l.Eb(2),l.mc("ngIf",n.pending),l.Eb(1),l.mc("ngIf",n.returnrequest)}}function We(e,t){1&e&&(l.Wb(0,"nb-alert",11),l.Bc(1,"No issued list! "),l.Vb())}function Ce(e,t){1&e&&(l.Wb(0,"span"),l.Rb(1,"nb-icon",30),l.Vb())}function Ve(e,t){1&e&&(l.Wb(0,"span"),l.Rb(1,"nb-icon",30),l.Vb())}function ye(e,t){if(1&e&&(l.Wb(0,"span"),l.Bc(1),l.Vb()),2&e){var n=l.gc().$implicit;l.Eb(1),l.Cc(n.issuedtime)}}function Me(e,t){if(1&e&&(l.Wb(0,"span"),l.Bc(1),l.Vb()),2&e){var n=l.gc().$implicit;l.Eb(1),l.Cc(n.returntime)}}function Be(e,t){if(1&e){var n=l.Xb();l.Wb(0,"button",31),l.ec("click",(function(){l.tc(n);var e=l.gc().$implicit;return l.gc(2).returnIssue(e)})),l.Bc(1,"Return"),l.Vb()}}function we(e,t){if(1&e){var n=l.Xb();l.Wb(0,"button",16),l.ec("click",(function(){l.tc(n);var e=l.gc().$implicit;return l.gc(2).deleteIssue(e)})),l.Bc(1,"Delete"),l.Vb()}}function Oe(e,t){1&e&&(l.Wb(0,"button",32),l.Bc(1,"Pending"),l.Vb())}function _e(e,t){if(1&e&&(l.Wb(0,"tr",24),l.Wb(1,"td",25),l.Bc(2),l.Vb(),l.Wb(3,"td",25),l.zc(4,Ce,2,0,"span",26),l.Vb(),l.Wb(5,"td",25),l.zc(6,Ve,2,0,"span",26),l.Vb(),l.Wb(7,"td",25),l.zc(8,ye,2,1,"span",26),l.Vb(),l.Wb(9,"td",25),l.zc(10,Me,2,1,"span",26),l.Vb(),l.Wb(11,"td",25),l.Wb(12,"div",27),l.zc(13,Be,2,0,"button",28),l.zc(14,we,2,0,"button",14),l.zc(15,Oe,2,0,"button",29),l.Vb(),l.Vb(),l.Vb()),2&e){var n=t.$implicit;l.gc();var i=l.rc(16),s=l.rc(18);l.Eb(2),l.Cc(n.book.name),l.Eb(2),l.mc("ngIf",n.takehome)("ngIfElse",i),l.Eb(2),l.mc("ngIf",n.approval)("ngIfElse",i),l.Eb(2),l.mc("ngIf",n.approval)("ngIfElse",s),l.Eb(2),l.mc("ngIf",n.returntime)("ngIfElse",s),l.Eb(3),l.mc("ngIf",!n.returntime&&n.approval&&!n.returnrequest),l.Eb(1),l.mc("ngIf",n.returntime||!n.approval),l.Eb(1),l.mc("ngIf",n.returnrequest)}}function Pe(e,t){1&e&&l.Rb(0,"nb-icon",33)}function Ie(e,t){1&e&&l.Bc(0,"-")}function Se(e,t){if(1&e&&(l.Wb(0,"table",19),l.Wb(1,"tr"),l.Wb(2,"th",20),l.Bc(3,"Book"),l.Vb(),l.Wb(4,"th",20),l.Bc(5,"Take Home"),l.Vb(),l.Wb(6,"th",20),l.Bc(7,"Approval"),l.Vb(),l.Wb(8,"th",20),l.Bc(9,"Issued Time"),l.Vb(),l.Wb(10,"th",20),l.Bc(11,"Returned Time"),l.Vb(),l.Wb(12,"th",20),l.Bc(13,"Action"),l.Vb(),l.Vb(),l.zc(14,_e,16,12,"tr",21),l.zc(15,Pe,1,0,"ng-template",null,22,l.Ac),l.zc(17,Ie,1,0,"ng-template",null,23,l.Ac),l.Vb()),2&e){var n=l.gc();l.Eb(14),l.mc("ngForOf",n.issuedList)}}var Ee,xe=((Ee=function(){function e(t,n,i){var s=this;_classCallCheck(this,e),this.issueService=t,this.dialogService=n,this.authService=i,this.requestList=[],this.issuedList=[],this.issueService.userIssueList.subscribe((function(e){e&&(s.requestList=e)}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getUserAllIssuedList(),this.issueService.approvalReceiveUser().subscribe((function(t){e.issueService.userIssueList.next(t.toUserReqList),e.issuedList=t.toUserIssuedList,e.filterData()})),this.issueService.userUpdatedReqList().subscribe((function(t){e.getUserAllIssuedList()}))}},{key:"deleteRequest",value:function(e){var t=this;this.dialogService.open(g,{context:{title:"Are you sure want to delete issue request '"+e.book.name+"' ?"}}).onClose.subscribe((function(n){n&&t.issueService.deleteRequest({issueDets:e,user:t.authService.currentUserValue})}))}},{key:"getUserAllIssuedList",value:function(){var e=this;this.issueService.getUserDataList(this.authService.currentUserValue).subscribe((function(t){e.issuedList=t,e.filterData()}))}},{key:"filterData",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,s=this.issuedList[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var c=i.value;c.requesttime=L(c.requesttime).format("YYYY-MM-DD (HH:mm)"),c.issuedtime=L(c.issuedtime).format("YYYY-MM-DD (HH:mm)"),c.returntime&&(c.returntime=L(c.returntime).format("YYYY-MM-DD (HH:mm)"))}}catch(o){t=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}}},{key:"deleteIssue",value:function(e){var t=this;this.dialogService.open(g,{context:{title:"Are you sure want to delete info of '"+e.book.name+"' ?"}}).onClose.subscribe((function(n){n&&t.issueService.deleteOldIssuedBook(e).subscribe((function(e){t.issuedList=e,t.filterData(),t.issueService.showToast("success","Deleted Issued record","Successful")}))}))}},{key:"returnIssue",value:function(e){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,s,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checktime();case 2:if(!t.sent){t.next=15;break}return t.next=5,this.oneDayReturnCheck(e);case 5:if(i=t.sent,t.t0=e.takehome,!t.t0){t.next=11;break}return t.next=10,this.takeHomeReturnCheck(e);case 10:n=t.sent;case 11:s="",(i||n)&&(s="You are submitting late! There will be fine for late submission."),this.dialogService.open(ge,{context:{title:"Return book '"+e.book.name+"' ?",note:s}}).onClose.subscribe((function(t){t&&c.issueService.userReturnBook(e)})),t.next=16;break;case 15:this.issueService.showToast("danger","Book return time 10:00 AM to 05:00 PM","Request Cancelled");case 16:case"end":return t.stop()}}),t,this)})))}},{key:"checktime",value:function(){var e=L(),t=L("10:00","HH:mm"),n=L("17:00","HH:mm");return e.isBetween(t,n)}},{key:"oneDayReturnCheck",value:function(e){var t=L(),n=L(new Date(e.issuedtime)).format("YYYY-MM-DD"),i=L(n+" 17:00","YYYY-MM-DD HH:mm").format();return t.isAfter(i)}},{key:"takeHomeReturnCheck",value:function(e){var t=L(),n=L(new Date(e.issuedtime)).add(7,"days").format("YYYY-MM-DD"),i=L(n+" 17:00","YYYY-MM-DD HH:mm").format();return t.isAfter(i)}}]),e}()).\u0275fac=function(e){return new(e||Ee)(l.Qb(u.a),l.Qb(c.C),l.Qb(b.a))},Ee.\u0275cmp=l.Kb({type:Ee,selectors:[["ngx-user-issue"]],decls:23,vars:4,consts:[[1,"row","col-sm-12"],[1,"col-sm-5"],[2,"height","80vh"],[1,"heading"],[1,"row","col-sm-12",2,"padding","0"],[1,"col-sm-7","offset-1"],[1,"col-sm-3","offset-1"],["outline","danger","style","margin: 0;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-7"],["class","issuetable","style","width: 100%;",4,"ngIf"],["outline","danger",2,"margin","0"],[1,"col-sm-8","tableHead"],[1,"col-sm-4","tableHead"],["nbButton","","status","danger","shape","round","ghost","",3,"click",4,"ngIf"],["nbButton","","status","danger","shape","round","disabled","","ghost","",4,"ngIf"],["nbButton","","status","danger","shape","round","ghost","",3,"click"],["icon","trash-alt","pack","regular"],["nbButton","","status","danger","shape","round","disabled","","ghost",""],[1,"issuetable",2,"width","100%"],[1,"issueHead"],["class","eachIssue",4,"ngFor","ngForOf"],["printNo",""],["noData",""],[1,"eachIssue"],[1,"issueData"],[4,"ngIf","ngIfElse"],[2,"display","flex"],["nbButton","","status","primary","title","Return Book","shape","round","ghost","",3,"click",4,"ngIf"],["nbButton","","status","danger","shape","round","ghost","","disabled","",4,"ngIf"],["icon","check","status","success","pack","solid"],["nbButton","","status","primary","title","Return Book","shape","round","ghost","",3,"click"],["nbButton","","status","danger","shape","round","ghost","","disabled",""],["icon","times","status","danger","pack","solid"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"nb-card",2),l.Wb(3,"nb-card-header"),l.Wb(4,"div",3),l.Bc(5,"Request List"),l.Vb(),l.Rb(6,"hr"),l.Wb(7,"div",4),l.Wb(8,"div",5),l.Bc(9,"Book"),l.Vb(),l.Wb(10,"div",6),l.Bc(11,"Action"),l.Vb(),l.Vb(),l.Vb(),l.zc(12,fe,2,0,"nb-alert",7),l.Wb(13,"nb-list"),l.zc(14,ke,7,3,"nb-list-item",8),l.Vb(),l.Vb(),l.Vb(),l.Wb(15,"div",9),l.Wb(16,"nb-card",2),l.Wb(17,"nb-card-header"),l.Wb(18,"div",3),l.Bc(19,"My Issue List"),l.Vb(),l.Vb(),l.Wb(20,"nb-card-body"),l.zc(21,We,2,0,"nb-alert",7),l.zc(22,Se,19,1,"table",10),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Eb(12),l.mc("ngIf",0==t.requestList.length),l.Eb(2),l.mc("ngForOf",t.requestList),l.Eb(7),l.mc("ngIf",0==t.issuedList.length),l.Eb(1),l.mc("ngIf",t.issuedList.length>0))},directives:[c.q,c.s,p.m,c.Q,p.l,c.p,c.j,c.R,c.n,c.E],styles:[".heading[_ngcontent-%COMP%]{font-size:17px;text-transform:uppercase}.heading[_ngcontent-%COMP%], .tableHead[_ngcontent-%COMP%]{text-align:center}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%], .issuetable[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.09);border-collapse:collapse;margin-bottom:10px;width:auto}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%]{text-align:center;padding:15px}.full-width-field[_ngcontent-%COMP%]{width:100%}.eachIssue[_ngcontent-%COMP%]{cursor:pointer}.eachIssue[_ngcontent-%COMP%]:hover{background:hsla(0,0%,50.2%,.15);outline:1px solid #00f}"]}),Ee);function Re(e,t){1&e&&(l.Ub(0),l.Rb(1,"ngx-admin-issue"),l.Tb())}function De(e,t){1&e&&l.Rb(0,"ngx-user-issue")}var Le,qe,ze=((Le=function e(t){_classCallCheck(this,e),this.authService=t,this.isadmin=!1,this.authService.isAdmin&&(this.isadmin=!0)}).\u0275fac=function(e){return new(e||Le)(l.Qb(b.a))},Le.\u0275cmp=l.Kb({type:Le,selectors:[["ngx-issue"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notAdmin",""]],template:function(e,t){if(1&e&&(l.zc(0,Re,2,0,"ng-container",0),l.zc(1,De,1,0,"ng-template",null,1,l.Ac)),2&e){var n=l.rc(2);l.mc("ngIf",t.isadmin)("ngIfElse",n)}},directives:[p.m,de,xe],styles:[""]}),Le),He=[{path:"",component:h,children:[{path:"library",component:$},{path:"profile",component:y,canActivate:[n("XgRA").a]},{path:"issue",component:ze},{path:"miscellaneous",loadChildren:function(){return n.e(7).then(n.bind(null,"ivxX")).then((function(e){return e.MiscellaneousModule}))}},{path:"",redirectTo:"library",pathMatch:"full"},{path:"**",component:m.a}]}],Ue=((qe=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:qe}),qe.\u0275inj=l.Nb({factory:function(e){return new(e||qe)},imports:[[r.g.forChild(He)],r.g]}),qe);n.d(t,"PagesModule",(function(){return Te}));var Ae,Te=((Ae=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:Ae}),Ae.\u0275inj=l.Nb({factory:function(e){return new(e||Ae)},imports:[[Ue,o.a,c.V,c.Z,c.t,c.o,c.G,c.db,c.w,c.S,c.kb,c.P,c.A,c.I,c.k,c.X,p.c,f.e,f.p,c.m]]}),Ae)},mrSG:function(e,t,n){"use strict";function i(e,t,n,i){return new(n||(n=Promise))((function(s,c){function o(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}a((i=i.apply(e,t||[])).next())}))}n.d(t,"a",(function(){return i}))},"w+5F":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),s=n("aceb"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.menuService=t}return _createClass(e,[{key:"goToHome",value:function(){this.menuService.navigateHome()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Qb(s.W))},e.\u0275cmp=i.Kb({type:e,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(e,t){1&e&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Wb(2,"nb-card"),i.Wb(3,"nb-card-body"),i.Wb(4,"div",2),i.Wb(5,"h2",3),i.Bc(6,"404 Page Not Found"),i.Vb(),i.Wb(7,"small",4),i.Bc(8,"The page you were looking for doesn't exist"),i.Vb(),i.Wb(9,"button",5),i.ec("click",(function(){return t.goToHome()})),i.Bc(10," Take me home "),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb())},directives:[s.q,s.p,s.n],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e}()}}]);