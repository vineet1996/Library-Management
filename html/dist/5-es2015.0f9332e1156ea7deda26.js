(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{dgmN:function(e,t,n){"use strict";n.r(t);var s=n("aceb"),i=n("vTDv"),c=n("tyNb");const o=[{title:"Library",icon:{icon:"book",pack:"solid"},link:"/pages/library",home:!0},{title:"Issue List",icon:{icon:"list-ul",pack:"solid"},link:"/pages/issue"}];var r=n("JWHN"),b=n("wvd9"),a=n("fXoL"),u=n("mgFL");let l=(()=>{class e{constructor(e,t,n){this.authService=e,this.router=t,this.issueService=n,this.menu=o}ngOnInit(){this.issueService.setupSocketConnection(),this.issueService.joinRoom(this.authService.currentUserValue),this.authService.isAdmin?this.adminSocketsSubscribes():this.userSocketsSubscribes()}adminSocketsSubscribes(){this.issueService.updatedReqList().subscribe(e=>{switch(this.issueService.adminIssueList.next(e.result),e.type){case"new":this.issueService.showToast("primary","Book Issue request","New Request");break;case"approval":this.issueService.showToast("success","Approval status","Submitted successfully");break;case"delete":this.issueService.showToast("warning","Request List is updated","Check updated list");break;case"return":this.issueService.showToast("primary","Return book request","Request")}})}userSocketsSubscribes(){this.issueService.userUpdatedReqList().subscribe(e=>{switch(this.issueService.userIssueList.next(e.result),e.type){case"new":this.issueService.showToast("success","Book Issue","Request Sent");break;case"delete":this.issueService.showToast("success","Deleted Request","Successfull");break;case"return":this.issueService.showToast("success","Return Request","Successfull")}}),this.issueService.approvalReceiveUser().subscribe(e=>{this.issueService.userIssueList.next(e.toUserReqList),e.approval?this.issueService.showToast("success",e.return?"Return Book is approved":"Book issue is approved","successfull"):this.issueService.showToast("warning","Book is declined","Rejected")})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(r.a),a.Qb(c.c),a.Qb(b.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(a.Wb(0,"ngx-one-column-layout"),a.Rb(1,"nb-menu",0),a.Rb(2,"router-outlet"),a.Vb()),2&e&&(a.Eb(1),a.mc("items",t.menu))},directives:[u.a,s.U,c.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),e})();var d=n("w+5F");let h=(()=>{class e{constructor(e){this.ref=e}ngOnInit(){}cancel(e){this.ref.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(s.B))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-alert-dialog"]],inputs:{title:"title"},decls:9,vars:1,consts:[["align","right"],["nbButton","","status","danger","size","small",1,"cancel",3,"click"],["nbButton","","status","success","size","small",3,"click"]],template:function(e,t){1&e&&(a.Wb(0,"nb-card"),a.Wb(1,"nb-card-body"),a.Wb(2,"div"),a.Bc(3),a.Vb(),a.Vb(),a.Wb(4,"nb-card-footer",0),a.Wb(5,"button",1),a.ec("click",(function(){return t.cancel(!1)})),a.Bc(6,"Cancel"),a.Vb(),a.Wb(7,"button",2),a.ec("click",(function(){return t.cancel(!0)})),a.Bc(8,"Yes"),a.Vb(),a.Vb(),a.Vb()),2&e&&(a.Eb(3),a.Cc(t.title))},directives:[s.q,s.p,s.r,s.n],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})();var m=n("3Pt+"),g=n("ofXK");function p(e,t){if(1&e){const e=a.Xb();a.Wb(0,"nb-card-body"),a.Wb(1,"div",8),a.Wb(2,"label",9),a.Bc(3,"Name"),a.Vb(),a.Wb(4,"div",10),a.Wb(5,"input",11),a.ec("ngModelChange",(function(t){return a.tc(e),a.gc().updatingUserData.name=t})),a.Vb(),a.Vb(),a.Vb(),a.Wb(6,"div",8),a.Wb(7,"label",12),a.Bc(8,"Email"),a.Vb(),a.Wb(9,"div",10),a.Wb(10,"input",13),a.ec("ngModelChange",(function(t){return a.tc(e),a.gc().updatingUserData.email=t})),a.Vb(),a.Vb(),a.Vb(),a.Wb(11,"div",8),a.Wb(12,"label",14),a.Bc(13,"Mobile"),a.Vb(),a.Wb(14,"div",10),a.Wb(15,"input",15),a.ec("ngModelChange",(function(t){return a.tc(e),a.gc().updatingUserData.mobile=t})),a.Vb(),a.Vb(),a.Vb(),a.Wb(16,"div",8),a.Wb(17,"label",16),a.Bc(18,"Gender"),a.Vb(),a.Wb(19,"div",10),a.Wb(20,"input",17),a.ec("ngModelChange",(function(t){return a.tc(e),a.gc().updatingUserData.gender=t})),a.Vb(),a.Vb(),a.Vb(),a.Wb(21,"div",8),a.Wb(22,"label",18),a.Bc(23,"Membership (In days)"),a.Vb(),a.Wb(24,"div",10),a.Wb(25,"input",19),a.ec("ngModelChange",(function(t){return a.tc(e),a.gc().updatingUserData.membershipdays=t})),a.Vb(),a.Vb(),a.Vb(),a.Wb(26,"div",8),a.Wb(27,"label",20),a.Bc(28,"Reading Hours (In hrs)"),a.Vb(),a.Wb(29,"div",10),a.Wb(30,"input",21),a.ec("ngModelChange",(function(t){return a.tc(e),a.gc().updatingUserData.readinghours=t})),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=a.gc();a.Eb(5),a.mc("ngModel",e.updatingUserData.name),a.Eb(5),a.mc("ngModel",e.updatingUserData.email),a.Eb(5),a.mc("ngModel",e.updatingUserData.mobile),a.Eb(5),a.mc("ngModel",e.updatingUserData.gender),a.Eb(5),a.mc("ngModel",e.updatingUserData.membershipdays),a.Eb(5),a.mc("ngModel",e.updatingUserData.readinghours)}}function f(e,t){1&e&&(a.Ub(0),a.Wb(1,"p",27),a.Bc(2," Password does not match! "),a.Vb(),a.Tb())}function W(e,t){if(1&e){const e=a.Xb();a.Wb(0,"nb-card-body"),a.Wb(1,"form",22),a.ec("ngSubmit",(function(){return a.tc(e),a.gc().setPassword()})),a.Wb(2,"div",8),a.Wb(3,"label",23),a.Bc(4,"New Password"),a.Vb(),a.Wb(5,"div",10),a.Rb(6,"input",24),a.Vb(),a.Vb(),a.Wb(7,"div",8),a.Wb(8,"label",25),a.Bc(9,"Re-type Password"),a.Vb(),a.Wb(10,"div",10),a.Rb(11,"input",26),a.zc(12,f,3,0,"ng-container",3),a.Vb(),a.Vb(),a.Vb(),a.Bc(13,"\xa0 "),a.Vb()}if(2&e){const e=a.gc();a.Eb(1),a.mc("formGroup",e.myForm),a.Eb(11),a.mc("ngIf",e.myForm.hasError("notMatch","retypeNew"))}}let v=(()=>{class e{constructor(e,t,n,s){this.authService=e,this.issueService=t,this.formBuilder=n,this.dialogService=s,this.myForm=this.formBuilder.group({newPassword:["",[m.r.required]],retypeNew:[""]}),this.myForm.get("retypeNew").valueChanges.subscribe(e=>{e&&(e!=this.myForm.get("newPassword").value&&this.myForm.get("retypeNew").setErrors({notMatch:!0}),e==this.myForm.get("newPassword").value&&this.myForm.get("retypeNew").setErrors({doesMatch:!0}))})}ngOnInit(){this.getUserDets()}getUserDets(){this.authService.getUserDets().subscribe(e=>{this.updatingUserData=e,this.myForm.addControl("_id",this.formBuilder.control(e._id))})}updateDetails(){this.dialogService.open(h,{context:{title:"Are you sure want to update details ?"}}).onClose.subscribe(e=>{e&&this.authService.userUpdateDetails(this.updatingUserData).subscribe(e=>{this.updatingUserData=e,this.issueService.showToast("success","Updated Details","Successful")})})}passwordReset(){this.dialogService.open(h,{context:{title:"Are you sure want to update details ?"}}).onClose.subscribe(e=>{e&&this.authService.userpasswordReset(this.myForm.value).subscribe(e=>{this.issueService.showToast("success","Updated Password","Successful")})})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(r.a),a.Qb(b.a),a.Qb(m.b),a.Qb(s.C))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-profile"]],decls:19,vars:3,consts:[[1,"row"],[1,"col-sm-7"],[1,"heading"],[4,"ngIf"],["align","right"],["nbButton","","status","success","size","small",3,"click"],[1,"col-sm-5"],["nbButton","","status","success","size","small",3,"disabled","click"],[1,"form-group","row"],["for","inputName",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","nbInput","","fullWidth","","id","inputName",3,"ngModel","ngModelChange"],["for","inputEmail1",1,"label","col-sm-3","col-form-label"],["type","email","nbInput","","fullWidth","","id","inputEmail1",3,"ngModel","ngModelChange"],["for","inputMobile",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputMobile",3,"ngModel","ngModelChange"],["for","inputGender",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputGender","disabled","",3,"ngModel","ngModelChange"],["for","inputMember",1,"label","col-sm-3","col-form-label"],["type","number","nbInput","","fullWidth","","id","inputMember","disabled","",3,"ngModel","ngModelChange"],["for","inputRead",1,"label","col-sm-3","col-form-label"],["type","number","min","1","max","7","nbInput","","fullWidth","","id","inputRead","disabled","",3,"ngModel","ngModelChange"],["aria-labelledby","title",3,"formGroup","ngSubmit"],["for","inputpass",1,"label","col-sm-3","col-form-label"],["type","password","formControlName","newPassword","nbInput","","fullWidth","","id","inputpass"],["for","inputRepass",1,"label","col-sm-3","col-form-label"],["type","password","formControlName","retypeNew","nbInput","","fullWidth","","id","inputRepass"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"nb-card"),a.Wb(3,"nb-card-header"),a.Wb(4,"div",2),a.Bc(5,"Profile Details"),a.Vb(),a.Vb(),a.zc(6,p,31,6,"nb-card-body",3),a.Wb(7,"nb-card-footer",4),a.Wb(8,"button",5),a.ec("click",(function(){return t.updateDetails()})),a.Bc(9,"Update"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(10,"div",6),a.Wb(11,"nb-card"),a.Wb(12,"nb-card-header"),a.Wb(13,"div",2),a.Bc(14,"Password Change"),a.Vb(),a.Vb(),a.zc(15,W,14,2,"nb-card-body",3),a.Wb(16,"nb-card-footer",4),a.Wb(17,"button",7),a.ec("click",(function(){return t.passwordReset()})),a.Bc(18,"Password Change"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&e&&(a.Eb(6),a.mc("ngIf",t.updatingUserData),a.Eb(9),a.mc("ngIf",t.updatingUserData),a.Eb(2),a.mc("disabled",!t.myForm.hasError("doesMatch","retypeNew")))},directives:[s.q,s.s,g.m,s.r,s.n,s.p,s.H,m.a,m.j,m.m,m.n,m.s,m.k,m.d,m.c],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.heading[_ngcontent-%COMP%]{font-size:17px;text-transform:uppercase;text-align:center}"]}),e})();var k=n("tk/3");let V=(()=>{class e{constructor(e){this.http=e,this.httpOptions={headers:new k.e({"Content-Type":"application/json"})}}createBook(e){return this.http.post("/book/createBook",e,this.httpOptions)}getAllBooks(){return this.http.get("/book/getBooks")}updateBook(e){return this.http.post("/book/updateBook",e,this.httpOptions)}deleteBook(e){return this.http.post("/book/deleteBook",e,this.httpOptions)}getSearchResults(e){return this.http.get(e?`/book/searchResult/${e}`:"/book/getBooks")}}return e.\u0275fac=function(t){return new(t||e)(a.ac(k.b))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function C(e,t){1&e&&(a.Wb(0,"span"),a.Bc(1,"Create"),a.Vb())}function M(e,t){1&e&&a.Bc(0,"Update")}let B=(()=>{class e{constructor(e,t){this.ref=e,this.formBuilder=t,this.bookForm=this.formBuilder.group({name:["",[m.r.required]],author:["",[m.r.required]],publish:["",[m.r.required]],stock:["",[m.r.required]],takehome:[!1]})}ngOnInit(){"Update"==this.type&&(this.bookForm.setValue({name:this.data.name,author:this.data.author,publish:this.data.publish,stock:this.data.stock,takehome:this.data.takehome}),this.bookForm.addControl("id",this.formBuilder.control(this.data._id)))}cancel(){this.ref.close()}addBook(){this.bookForm.valid&&this.ref.close(this.bookForm.value)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(s.B),a.Qb(m.b))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-add-book"]],inputs:{type:"type",data:"data"},decls:37,vars:3,consts:[["size","medium"],[3,"formGroup"],[1,"form-group","row"],["for","inputname",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","nbInput","","fullWidth","","id","inputname","formControlName","name","placeholder","name"],["for","inputauthor",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputauthor","formControlName","author","placeholder","Kelly Rimmer "],["for","inputpublish",1,"label","col-sm-3","col-form-label"],["type","text","nbInput","","fullWidth","","id","inputpublish","formControlName","publish","placeholder","2019 Harlequin Enterprises, Limited"],["for","inputstock",1,"label","col-sm-3","col-form-label"],["type","number","nbInput","","fullWidth","","id","inputstock","formControlName","stock","min","1"],[1,"col-sm-3","label"],["formControlName","takehome"],["align","right"],["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"],[4,"ngIf","ngIfElse"],["updateBtn",""]],template:function(e,t){if(1&e&&(a.Wb(0,"nb-card",0),a.Wb(1,"nb-card-header"),a.Bc(2,"New Book Details"),a.Vb(),a.Wb(3,"nb-card-body"),a.Wb(4,"form",1),a.Wb(5,"div",2),a.Wb(6,"label",3),a.Bc(7,"Name"),a.Vb(),a.Wb(8,"div",4),a.Rb(9,"input",5),a.Vb(),a.Vb(),a.Wb(10,"div",2),a.Wb(11,"label",6),a.Bc(12,"Author"),a.Vb(),a.Wb(13,"div",4),a.Rb(14,"input",7),a.Vb(),a.Vb(),a.Wb(15,"div",2),a.Wb(16,"label",8),a.Bc(17,"Publish"),a.Vb(),a.Wb(18,"div",4),a.Rb(19,"input",9),a.Vb(),a.Vb(),a.Wb(20,"div",2),a.Wb(21,"label",10),a.Bc(22,"Stock"),a.Vb(),a.Wb(23,"div",4),a.Rb(24,"input",11),a.Vb(),a.Vb(),a.Wb(25,"div",2),a.Wb(26,"label",12),a.Bc(27,"Take home"),a.Vb(),a.Wb(28,"div",4),a.Rb(29,"nb-checkbox",13),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(30,"nb-card-footer",14),a.Wb(31,"button",15),a.ec("click",(function(){return t.cancel()})),a.Bc(32,"Cancel"),a.Vb(),a.Wb(33,"button",16),a.ec("click",(function(){return t.addBook()})),a.zc(34,C,2,0,"span",17),a.Vb(),a.zc(35,M,1,0,"ng-template",null,18,a.Ac),a.Vb(),a.Vb()),2&e){const e=a.rc(36);a.Eb(4),a.mc("formGroup",t.bookForm),a.Eb(30),a.mc("ngIf","New"==t.type)("ngIfElse",e)}},directives:[s.q,s.s,s.p,m.s,m.k,m.d,s.H,m.a,m.j,m.c,m.n,s.v,s.r,s.n,g.m],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})();function y(e,t){1&e&&(a.Wb(0,"nb-alert",7),a.Bc(1,"No search results. "),a.Vb())}function O(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div",10),a.Wb(1,"nb-card",11),a.Wb(2,"nb-card-header",12),a.Wb(3,"h6"),a.Bc(4),a.Vb(),a.Vb(),a.Wb(5,"nb-card-body"),a.Wb(6,"div",13),a.Wb(7,"label",14),a.Bc(8,"Author"),a.Vb(),a.Wb(9,"div",15),a.Bc(10),a.Vb(),a.Vb(),a.Wb(11,"div",13),a.Wb(12,"label",14),a.Bc(13,"Publish"),a.Vb(),a.Wb(14,"div",15),a.Bc(15),a.Vb(),a.Vb(),a.Wb(16,"div",13),a.Wb(17,"label",14),a.Bc(18,"Stock"),a.Vb(),a.Wb(19,"div",15),a.Bc(20),a.Vb(),a.Vb(),a.Wb(21,"div",13),a.Wb(22,"label",14),a.Bc(23,"Take Home"),a.Vb(),a.Wb(24,"div",15),a.Rb(25,"nb-checkbox",16),a.Vb(),a.Vb(),a.Vb(),a.Wb(26,"nb-card-footer",17),a.Wb(27,"button",18),a.ec("click",(function(){a.tc(e);const n=t.$implicit;return a.gc(2).updateBook(n)})),a.Bc(28,"Update"),a.Vb(),a.Wb(29,"button",19),a.ec("click",(function(){a.tc(e);const n=t.$implicit;return a.gc(2).deleteBook(n)})),a.Bc(30,"Delete"),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=t.$implicit;a.Eb(4),a.Cc(e.name),a.Eb(6),a.Cc(e.author),a.Eb(5),a.Cc(e.publish),a.Eb(5),a.Cc(e.stock),a.Eb(5),a.mc("checked",e.takehome)}}function w(e,t){if(1&e&&(a.Wb(0,"div",8),a.zc(1,O,31,5,"div",9),a.Vb()),2&e){const e=a.gc();a.Eb(1),a.mc("ngForOf",e.booksList)}}let P=(()=>{class e{constructor(e,t,n){this.dialogService=e,this.libraryService=t,this.toastrService=n,this.position=s.D.TOP_LEFT}ngOnInit(){}addNewBook(){this.dialogService.open(B,{context:{type:"New",data:""}}).onClose.subscribe(e=>{e&&this.libraryService.createBook(e).subscribe(e=>{this.booksList=e,this.showToast("success","New Book created","Successfull!")})})}updateBook(e){this.dialogService.open(B,{context:{type:"Update",data:e}}).onClose.subscribe(e=>{e&&this.libraryService.updateBook(e).subscribe(e=>{this.booksList=e,this.showToast("success","Updated","Successfull!")})})}deleteBook(e){this.dialogService.open(h,{context:{title:'Are you Sure want to delete book "'+e.name+'" ?'}}).onClose.subscribe(t=>{t&&this.libraryService.deleteBook(e).subscribe(e=>{this.booksList=e,this.showToast("success","Deleted","Successfull!")})})}showToast(e,t,n){this.toastrService.show(n,t,{status:e,destroyByClick:!0,duration:3e3,hasIcon:!0,position:this.position,preventDuplicates:!1})}searchText(e){this.libraryService.getSearchResults(e.target.value).subscribe(e=>{this.booksList=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(s.C),a.Qb(V),a.Qb(s.ib))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-admin-library"]],inputs:{booksList:"booksList"},decls:11,vars:2,consts:[[1,"row"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","placeholder","Type here to search...",3,"keyup"],[1,"col-sm-2"],["nbButton","","status","primary",3,"click"],["outline","warning","style","margin: 0;",4,"ngIf"],["class","row col-sm-12",4,"ngIf"],["outline","warning",2,"margin","0"],[1,"row","col-sm-12"],["class","col-sm-4",4,"ngFor","ngForOf"],[1,"col-sm-4"],[2,"height","30vh"],[2,"text-align","center"],[1,"form-group","row"],["for","inputname",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["disabled","",3,"checked"],["align","right"],["nbButton","","status","success","size","small",1,"cancel",3,"click"],["nbButton","","status","danger","size","small",3,"click"]],template:function(e,t){1&e&&(a.Wb(0,"nb-card"),a.Wb(1,"nb-card-header"),a.Wb(2,"div",0),a.Wb(3,"div",1),a.Wb(4,"input",2),a.ec("keyup",(function(e){return t.searchText(e)})),a.Vb(),a.Vb(),a.Wb(5,"div",3),a.Wb(6,"button",4),a.ec("click",(function(){return t.addNewBook()})),a.Bc(7,"Add Book"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(8,"nb-card-body"),a.zc(9,y,2,0,"nb-alert",5),a.Vb(),a.Vb(),a.zc(10,w,2,1,"div",6)),2&e&&(a.Eb(9),a.mc("ngIf",0==t.booksList.length),a.Eb(1),a.mc("ngIf",t.booksList.length>0))},directives:[s.q,s.s,s.H,s.n,s.p,g.m,s.j,g.l,s.v,s.r],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})();var I=n("mrSG"),_=n("wd/R");function S(e,t){1&e&&(a.Wb(0,"nb-alert",5),a.Bc(1,"Your Membership is expiring in 5 days."),a.Vb())}function E(e,t){1&e&&(a.Wb(0,"nb-alert",5),a.Bc(1,"No search results. "),a.Vb())}function D(e,t){1&e&&a.Rb(0,"nb-badge",16)}function R(e,t){if(1&e){const e=a.Xb();a.Wb(0,"button",17),a.ec("click",(function(){a.tc(e);const t=a.gc().$implicit;return a.gc().issueBook(t,!0)})),a.Bc(1,"Take Home"),a.Vb()}if(2&e){const e=a.gc().$implicit;a.mc("disabled",0==e.stock)}}function x(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div",6),a.Wb(1,"nb-card",7),a.Wb(2,"nb-card-header",8),a.zc(3,D,1,0,"nb-badge",9),a.Wb(4,"h6"),a.Bc(5),a.Vb(),a.Vb(),a.Wb(6,"nb-card-body"),a.Wb(7,"div",10),a.Wb(8,"label",11),a.Bc(9,"Author"),a.Vb(),a.Wb(10,"div",12),a.Bc(11),a.Vb(),a.Vb(),a.Wb(12,"div",10),a.Wb(13,"label",11),a.Bc(14,"Publish"),a.Vb(),a.Wb(15,"div",12),a.Bc(16),a.Vb(),a.Vb(),a.Wb(17,"div",10),a.Wb(18,"label",11),a.Bc(19,"Stock"),a.Vb(),a.Wb(20,"div",12),a.Bc(21),a.Vb(),a.Vb(),a.Vb(),a.Wb(22,"nb-card-footer",13),a.zc(23,R,2,1,"button",14),a.Wb(24,"button",15),a.ec("click",(function(){a.tc(e);const n=t.$implicit;return a.gc().issueBook(n,!1)})),a.Bc(25,"Read"),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=t.$implicit;a.Eb(3),a.mc("ngIf",0==e.stock),a.Eb(2),a.Cc(e.name),a.Eb(6),a.Cc(e.author),a.Eb(5),a.Cc(e.publish),a.Eb(5),a.Cc(e.stock),a.Eb(2),a.mc("ngIf",e.takehome),a.Eb(1),a.mc("disabled",0==e.stock)}}let L=(()=>{class e{constructor(e,t,n,s){this.dialogService=e,this.issueService=t,this.libraryService=n,this.authService=s,this.userData=""}ngOnInit(){this.userData=this.authService.currentUserValue,this.authService.reduceMemberShipDays(),this.authService.currentUserSubject.subscribe(e=>{e&&(this.membershipDays=e.membership)})}issueBook(e,t){return Object(I.a)(this,void 0,void 0,(function*(){(yield this.checktime())?t?this.membershipDays>5?this.issueFuntion(e,t):this.issueService.showToast("warning","Your membership is expiring","Request Cancelled"):this.issueFuntion(e,t):this.issueService.showToast("danger","Issue Time 10:00 AM to 03:00 PM","Request Cancelled")}))}issueFuntion(e,t){let n='Request book "'+e.name+'" to read ?';t&&(n='Request book "'+e.name+'" to take home ?'),this.dialogService.open(h,{context:{title:n}}).onClose.subscribe(n=>{n&&this.issueService.requestIssue({userId:this.userData.id,takeHome:t,bookId:e._id})})}checktime(){const e=_().format(),t=_("10:00","HH:mm").format(),n=_("20:00","HH:mm").format();return _(e).isBetween(t,n)}searchText(e){this.libraryService.getSearchResults(e.target.value).subscribe(e=>{this.booksList=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(s.C),a.Qb(b.a),a.Qb(V),a.Qb(r.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-user-library"]],inputs:{booksList:"booksList"},decls:9,vars:3,consts:[[1,"row","col-sm-12"],[1,"col-sm-12"],["type","text","nbInput","","fullWidth","","placeholder","Type here to search...",3,"keyup"],["outline","warning","style","margin: 0;",4,"ngIf"],["class","col-sm-4",4,"ngFor","ngForOf"],["outline","warning",2,"margin","0"],[1,"col-sm-4"],[2,"height","30vh"],[2,"text-align","center"],["text","Out of stock","status","danger","position","top right",4,"ngIf"],[1,"form-group","row"],["for","inputname",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["align","right"],["class","cancel","nbButton","","status","success","size","small",3,"disabled","click",4,"ngIf"],["nbButton","","status","primary","size","small",3,"disabled","click"],["text","Out of stock","status","danger","position","top right"],["nbButton","","status","success","size","small",1,"cancel",3,"disabled","click"]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"nb-card"),a.Wb(3,"nb-card-header"),a.Wb(4,"input",2),a.ec("keyup",(function(e){return t.searchText(e)})),a.Vb(),a.Vb(),a.Wb(5,"nb-card-body"),a.zc(6,S,2,0,"nb-alert",3),a.zc(7,E,2,0,"nb-alert",3),a.Vb(),a.Vb(),a.Vb(),a.zc(8,x,26,7,"div",4),a.Vb()),2&e&&(a.Eb(6),a.mc("ngIf",t.membershipDays&&5>t.membershipDays),a.Eb(1),a.mc("ngIf",0==t.booksList.length),a.Eb(1),a.mc("ngForOf",t.booksList))},directives:[s.q,s.s,s.H,s.p,g.m,g.l,s.j,s.r,s.n,s.l],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})();function q(e,t){if(1&e&&(a.Ub(0),a.Rb(1,"ngx-admin-library",2),a.Tb()),2&e){const e=a.gc();a.Eb(1),a.mc("booksList",e.allBooks)}}function z(e,t){if(1&e&&a.Rb(0,"ngx-user-library",2),2&e){const e=a.gc();a.mc("booksList",e.allBooks)}}let H=(()=>{class e{constructor(e,t,n){this.authService=e,this.libraryService=t,this.issueService=n,this.allBooks=[],this.isadmin=!1,this.authService.isAdmin&&(this.isadmin=!0)}ngOnInit(){this.getLibrary(),this.issueService.updateAllUsers().subscribe(e=>{this.getLibrary()})}getLibrary(){this.libraryService.getAllBooks().subscribe(e=>{this.allBooks=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(r.a),a.Qb(V),a.Qb(b.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-library"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notAdmin",""],[3,"booksList"]],template:function(e,t){if(1&e&&(a.zc(0,q,2,1,"ng-container",0),a.zc(1,z,1,1,"ng-template",null,1,a.Ac)),2&e){const e=a.rc(2);a.mc("ngIf",t.isadmin)("ngIfElse",e)}},directives:[g.m,P,L],styles:[""]}),e})();function U(e,t){1&e&&(a.Wb(0,"nb-alert",6),a.Bc(1,"No pending request! "),a.Vb())}function A(e,t){1&e&&(a.Wb(0,"span"),a.Rb(1,"nb-icon",19),a.Vb())}function T(e,t){1&e&&(a.Wb(0,"span"),a.Bc(1,"Issue"),a.Vb())}function Y(e,t){if(1&e){const e=a.Xb();a.Wb(0,"button",20),a.ec("click",(function(){a.tc(e);const t=a.gc().$implicit;return a.gc(2).approvalBook(t,!1)})),a.Rb(1,"nb-icon",21),a.Vb()}}function F(e,t){if(1&e){const e=a.Xb();a.Wb(0,"tr",12),a.Wb(1,"td",13),a.Bc(2),a.Vb(),a.Wb(3,"td",13),a.Bc(4),a.Vb(),a.Wb(5,"td",13),a.zc(6,A,2,0,"span",14),a.Vb(),a.Wb(7,"td",13),a.zc(8,T,2,0,"span",14),a.Vb(),a.Wb(9,"td",13),a.Wb(10,"div",15),a.zc(11,Y,2,0,"button",16),a.Wb(12,"button",17),a.ec("click",(function(){a.tc(e);const n=t.$implicit;return a.gc(2).approvalBook(n,!0)})),a.Rb(13,"nb-icon",18),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=t.$implicit;a.gc();const n=a.rc(14),s=a.rc(16);a.Eb(2),a.Cc(e.user.username),a.Eb(2),a.Cc(e.book.name),a.Eb(2),a.mc("ngIf",e.takehome)("ngIfElse",n),a.Eb(2),a.mc("ngIf",e.pending)("ngIfElse",s),a.Eb(3),a.mc("ngIf",e.pending)}}function N(e,t){1&e&&a.Rb(0,"nb-icon",22)}function Q(e,t){1&e&&a.Bc(0,"Return")}function $(e,t){if(1&e&&(a.Wb(0,"table",7),a.Wb(1,"tr"),a.Wb(2,"th",8),a.Bc(3,"User"),a.Vb(),a.Wb(4,"th",8),a.Bc(5,"Book"),a.Vb(),a.Wb(6,"th",8),a.Bc(7,"Take Home"),a.Vb(),a.Wb(8,"th",8),a.Bc(9,"type"),a.Vb(),a.Wb(10,"th",8),a.Bc(11,"Action"),a.Vb(),a.Vb(),a.zc(12,F,14,7,"tr",9),a.zc(13,N,1,0,"ng-template",null,10,a.Ac),a.zc(15,Q,1,0,"ng-template",null,11,a.Ac),a.Vb()),2&e){const e=a.gc();a.Eb(12),a.mc("ngForOf",e.requestList)}}function X(e,t){1&e&&(a.Wb(0,"nb-alert",6),a.Bc(1,"No issued list! "),a.Vb())}function j(e,t){1&e&&(a.Wb(0,"span"),a.Rb(1,"nb-icon",19),a.Vb())}function K(e,t){1&e&&(a.Wb(0,"span"),a.Rb(1,"nb-icon",19),a.Vb())}function G(e,t){if(1&e&&(a.Wb(0,"span"),a.Bc(1),a.Vb()),2&e){const e=a.gc().$implicit;a.Eb(1),a.Cc(e.issuedtime)}}function J(e,t){if(1&e&&(a.Wb(0,"span"),a.Bc(1),a.Vb()),2&e){const e=a.gc().$implicit;a.Eb(1),a.Cc(e.returntime)}}function Z(e,t){if(1&e&&(a.Wb(0,"tr",12),a.Wb(1,"td",13),a.Bc(2),a.Vb(),a.Wb(3,"td",13),a.Bc(4),a.Vb(),a.Wb(5,"td",13),a.zc(6,j,2,0,"span",14),a.Vb(),a.Wb(7,"td",13),a.zc(8,K,2,0,"span",14),a.Vb(),a.Wb(9,"td",13),a.zc(10,G,2,1,"span",14),a.Vb(),a.Wb(11,"td",13),a.zc(12,J,2,1,"span",14),a.Vb(),a.Vb()),2&e){const e=t.$implicit;a.gc();const n=a.rc(16),s=a.rc(18);a.Eb(2),a.Cc(e.user.username),a.Eb(2),a.Cc(e.book.name),a.Eb(2),a.mc("ngIf",e.takehome)("ngIfElse",n),a.Eb(2),a.mc("ngIf",e.approval)("ngIfElse",n),a.Eb(2),a.mc("ngIf",e.approval)("ngIfElse",s),a.Eb(2),a.mc("ngIf",e.returntime)("ngIfElse",s)}}function ee(e,t){1&e&&a.Rb(0,"nb-icon",22)}function te(e,t){1&e&&a.Bc(0,"-")}function ne(e,t){if(1&e&&(a.Wb(0,"table",7),a.Wb(1,"tr"),a.Wb(2,"th",8),a.Bc(3,"User"),a.Vb(),a.Wb(4,"th",8),a.Bc(5,"Book"),a.Vb(),a.Wb(6,"th",8),a.Bc(7,"Take Home"),a.Vb(),a.Wb(8,"th",8),a.Bc(9,"Approval"),a.Vb(),a.Wb(10,"th",8),a.Bc(11,"Issued Time"),a.Vb(),a.Wb(12,"th",8),a.Bc(13,"Returned Time"),a.Vb(),a.Vb(),a.zc(14,Z,13,10,"tr",9),a.zc(15,ee,1,0,"ng-template",null,10,a.Ac),a.zc(17,te,1,0,"ng-template",null,23,a.Ac),a.Vb()),2&e){const e=a.gc();a.Eb(14),a.mc("ngForOf",e.issuedList)}}let se=(()=>{class e{constructor(e,t){this.issueService=e,this.dialogService=t,this.requestList=[],this.issuedList=[]}ngOnInit(){this.getAdminOldData(),this.issueService.adminIssueList.subscribe(e=>{e&&(this.requestList=e)}),this.issueService.updatedReqList().subscribe(e=>{this.getAdminOldData()})}approvalBook(e,t){let n="Accept the request of '"+e.book.name+"' by '"+e.user.username+"' ?";t||(n="Decline the request of '"+e.book.name+"' by '"+e.user.username+"' ?"),e.returnrequest&&(n="Accept return request of '"+e.book.name+"' by '"+e.user.username+"' ?"),this.dialogService.open(h,{context:{title:n}}).onClose.subscribe(n=>{if(n){let n={issueDets:e,approval:t,returnreq:!1};e.returnrequest&&(n.returnreq=!0),this.issueService.approvalByAdmin(n)}})}getAdminOldData(){this.issueService.getAdminAllOldData().subscribe(e=>{this.issuedList=e,this.filterData()})}filterData(){for(let e of this.issuedList)e.requesttime=_(e.requesttime).format("YYYY-MM-DD (HH:mm)"),e.issuedtime=_(e.issuedtime).format("YYYY-MM-DD (HH:mm)"),e.returntime&&(e.returntime=_(e.returntime).format("YYYY-MM-DD (HH:mm)"))}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(b.a),a.Qb(s.C))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-admin-issue"]],decls:17,vars:4,consts:[[1,"row","col-sm-12"],[1,"col-sm-6"],[2,"height","80vh"],[1,"heading"],["outline","danger","style","margin: 0;",4,"ngIf"],["class","issuetable","style","width: 100%;",4,"ngIf"],["outline","danger",2,"margin","0"],[1,"issuetable",2,"width","100%"],[1,"issueHead"],["class","eachIssue",4,"ngFor","ngForOf"],["printNo",""],["returnreq",""],[1,"eachIssue"],[1,"issueData"],[4,"ngIf","ngIfElse"],[2,"display","flex"],["nbButton","","status","danger","shape","round","ghost","",3,"click",4,"ngIf"],["nbButton","","status","success","shape","round","ghost","",3,"click"],["icon","check","pack","solid"],["icon","check","status","success","pack","solid"],["nbButton","","status","danger","shape","round","ghost","",3,"click"],["icon","times","pack","solid"],["icon","times","status","danger","pack","solid"],["noData",""]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"nb-card",2),a.Wb(3,"nb-card-header"),a.Wb(4,"div",3),a.Bc(5,"Request List"),a.Vb(),a.Vb(),a.Wb(6,"nb-card-body"),a.zc(7,U,2,0,"nb-alert",4),a.zc(8,$,17,1,"table",5),a.Vb(),a.Vb(),a.Vb(),a.Wb(9,"div",1),a.Wb(10,"nb-card",2),a.Wb(11,"nb-card-header"),a.Wb(12,"div",3),a.Bc(13,"Issued List"),a.Vb(),a.Vb(),a.Wb(14,"nb-card-body"),a.zc(15,X,2,0,"nb-alert",4),a.zc(16,ne,19,1,"table",5),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&e&&(a.Eb(7),a.mc("ngIf",0==t.requestList.length),a.Eb(1),a.mc("ngIf",t.requestList.length>0),a.Eb(7),a.mc("ngIf",0==t.issuedList.length),a.Eb(1),a.mc("ngIf",t.issuedList.length>0))},directives:[s.q,s.s,s.p,g.m,s.j,g.l,s.n,s.E],styles:[".heading[_ngcontent-%COMP%]{font-size:17px;text-transform:uppercase}.heading[_ngcontent-%COMP%], .tableHead[_ngcontent-%COMP%]{text-align:center}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%], .issuetable[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.09);border-collapse:collapse;margin-bottom:10px;width:auto}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%]{text-align:center;padding:15px}.full-width-field[_ngcontent-%COMP%]{width:100%}.eachIssue[_ngcontent-%COMP%]{cursor:pointer}.eachIssue[_ngcontent-%COMP%]:hover{background:hsla(0,0%,50.2%,.15);outline:1px solid #00f}"]}),e})();function ie(e,t){if(1&e&&(a.Wb(0,"span",4),a.Bc(1),a.Vb()),2&e){const e=a.gc();a.Eb(1),a.Dc("*Note: ",e.note,"")}}let ce=(()=>{class e{constructor(e){this.ref=e}ngOnInit(){}cancel(e){this.ref.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(s.B))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-return-alert"]],inputs:{title:"title",note:"note"},decls:10,vars:2,consts:[["class","noteClass",4,"ngIf"],["align","right"],["nbButton","","status","danger","size","small",1,"cancel",3,"click"],["nbButton","","status","success","size","small",3,"click"],[1,"noteClass"]],template:function(e,t){1&e&&(a.Wb(0,"nb-card"),a.Wb(1,"nb-card-body"),a.Wb(2,"div"),a.Bc(3),a.Vb(),a.zc(4,ie,2,1,"span",0),a.Vb(),a.Wb(5,"nb-card-footer",1),a.Wb(6,"button",2),a.ec("click",(function(){return t.cancel(!1)})),a.Bc(7,"Cancel"),a.Vb(),a.Wb(8,"button",3),a.ec("click",(function(){return t.cancel(!0)})),a.Bc(9,"Yes"),a.Vb(),a.Vb(),a.Vb()),2&e&&(a.Eb(3),a.Cc(t.title),a.Eb(1),a.mc("ngIf",t.note))},directives:[s.q,s.p,g.m,s.r,s.n],styles:[".nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:1rem}.noteClass[_ngcontent-%COMP%]{color:red;font-size:12px}"]}),e})();function oe(e,t){1&e&&(a.Wb(0,"nb-alert",11),a.Bc(1,"No pending request! "),a.Vb())}function re(e,t){if(1&e){const e=a.Xb();a.Wb(0,"button",16),a.ec("click",(function(){a.tc(e);const t=a.gc().$implicit;return a.gc().deleteRequest(t)})),a.Rb(1,"nb-icon",17),a.Vb()}}function be(e,t){1&e&&(a.Wb(0,"button",18),a.Bc(1,"Pending"),a.Vb())}function ae(e,t){if(1&e&&(a.Wb(0,"nb-list-item"),a.Wb(1,"div",4),a.Wb(2,"div",12),a.Bc(3),a.Vb(),a.Wb(4,"div",13),a.zc(5,re,2,0,"button",14),a.zc(6,be,2,0,"button",15),a.Vb(),a.Vb(),a.Vb()),2&e){const e=t.$implicit;a.Eb(3),a.Cc(e.book.name),a.Eb(2),a.mc("ngIf",e.pending),a.Eb(1),a.mc("ngIf",e.returnrequest)}}function ue(e,t){1&e&&(a.Wb(0,"nb-alert",11),a.Bc(1,"No issued list! "),a.Vb())}function le(e,t){1&e&&(a.Wb(0,"span"),a.Rb(1,"nb-icon",30),a.Vb())}function de(e,t){1&e&&(a.Wb(0,"span"),a.Rb(1,"nb-icon",30),a.Vb())}function he(e,t){if(1&e&&(a.Wb(0,"span"),a.Bc(1),a.Vb()),2&e){const e=a.gc().$implicit;a.Eb(1),a.Cc(e.issuedtime)}}function me(e,t){if(1&e&&(a.Wb(0,"span"),a.Bc(1),a.Vb()),2&e){const e=a.gc().$implicit;a.Eb(1),a.Cc(e.returntime)}}function ge(e,t){if(1&e){const e=a.Xb();a.Wb(0,"button",31),a.ec("click",(function(){a.tc(e);const t=a.gc().$implicit;return a.gc(2).returnIssue(t)})),a.Bc(1,"Return"),a.Vb()}}function pe(e,t){if(1&e){const e=a.Xb();a.Wb(0,"button",16),a.ec("click",(function(){a.tc(e);const t=a.gc().$implicit;return a.gc(2).deleteIssue(t)})),a.Bc(1,"Delete"),a.Vb()}}function fe(e,t){1&e&&(a.Wb(0,"button",32),a.Bc(1,"Pending"),a.Vb())}function We(e,t){if(1&e&&(a.Wb(0,"tr",24),a.Wb(1,"td",25),a.Bc(2),a.Vb(),a.Wb(3,"td",25),a.zc(4,le,2,0,"span",26),a.Vb(),a.Wb(5,"td",25),a.zc(6,de,2,0,"span",26),a.Vb(),a.Wb(7,"td",25),a.zc(8,he,2,1,"span",26),a.Vb(),a.Wb(9,"td",25),a.zc(10,me,2,1,"span",26),a.Vb(),a.Wb(11,"td",25),a.Wb(12,"div",27),a.zc(13,ge,2,0,"button",28),a.zc(14,pe,2,0,"button",14),a.zc(15,fe,2,0,"button",29),a.Vb(),a.Vb(),a.Vb()),2&e){const e=t.$implicit;a.gc();const n=a.rc(16),s=a.rc(18);a.Eb(2),a.Cc(e.book.name),a.Eb(2),a.mc("ngIf",e.takehome)("ngIfElse",n),a.Eb(2),a.mc("ngIf",e.approval)("ngIfElse",n),a.Eb(2),a.mc("ngIf",e.approval)("ngIfElse",s),a.Eb(2),a.mc("ngIf",e.returntime)("ngIfElse",s),a.Eb(3),a.mc("ngIf",!e.returntime&&e.approval&&!e.returnrequest),a.Eb(1),a.mc("ngIf",e.returntime||!e.approval),a.Eb(1),a.mc("ngIf",e.returnrequest)}}function ve(e,t){1&e&&a.Rb(0,"nb-icon",33)}function ke(e,t){1&e&&a.Bc(0,"-")}function Ve(e,t){if(1&e&&(a.Wb(0,"table",19),a.Wb(1,"tr"),a.Wb(2,"th",20),a.Bc(3,"Book"),a.Vb(),a.Wb(4,"th",20),a.Bc(5,"Take Home"),a.Vb(),a.Wb(6,"th",20),a.Bc(7,"Approval"),a.Vb(),a.Wb(8,"th",20),a.Bc(9,"Issued Time"),a.Vb(),a.Wb(10,"th",20),a.Bc(11,"Returned Time"),a.Vb(),a.Wb(12,"th",20),a.Bc(13,"Action"),a.Vb(),a.Vb(),a.zc(14,We,16,12,"tr",21),a.zc(15,ve,1,0,"ng-template",null,22,a.Ac),a.zc(17,ke,1,0,"ng-template",null,23,a.Ac),a.Vb()),2&e){const e=a.gc();a.Eb(14),a.mc("ngForOf",e.issuedList)}}let Ce=(()=>{class e{constructor(e,t,n){this.issueService=e,this.dialogService=t,this.authService=n,this.requestList=[],this.issuedList=[],this.issueService.userIssueList.subscribe(e=>{e&&(this.requestList=e)})}ngOnInit(){this.getUserAllIssuedList(),this.issueService.approvalReceiveUser().subscribe(e=>{this.issueService.userIssueList.next(e.toUserReqList),this.issuedList=e.toUserIssuedList,this.filterData()}),this.issueService.userUpdatedReqList().subscribe(e=>{this.getUserAllIssuedList()})}deleteRequest(e){this.dialogService.open(h,{context:{title:"Are you sure want to delete issue request '"+e.book.name+"' ?"}}).onClose.subscribe(t=>{t&&this.issueService.deleteRequest({issueDets:e,user:this.authService.currentUserValue})})}getUserAllIssuedList(){this.issueService.getUserDataList(this.authService.currentUserValue).subscribe(e=>{this.issuedList=e,this.filterData()})}filterData(){for(let e of this.issuedList)e.requesttime=_(e.requesttime).format("YYYY-MM-DD (HH:mm)"),e.issuedtime=_(e.issuedtime).format("YYYY-MM-DD (HH:mm)"),e.returntime&&(e.returntime=_(e.returntime).format("YYYY-MM-DD (HH:mm)"))}deleteIssue(e){this.dialogService.open(h,{context:{title:"Are you sure want to delete info of '"+e.book.name+"' ?"}}).onClose.subscribe(t=>{t&&this.issueService.deleteOldIssuedBook(e).subscribe(e=>{this.issuedList=e,this.filterData(),this.issueService.showToast("success","Deleted Issued record","Successful")})})}returnIssue(e){return Object(I.a)(this,void 0,void 0,(function*(){if(yield this.checktime()){let t,n=yield this.oneDayReturnCheck(e);e.takehome&&(t=yield this.takeHomeReturnCheck(e));let s="";(n||t)&&(s="You are submitting late! There will be fine for late submission."),this.dialogService.open(ce,{context:{title:"Return book '"+e.book.name+"' ?",note:s}}).onClose.subscribe(t=>{t&&this.issueService.userReturnBook(e)})}else this.issueService.showToast("danger","Book return time 10:00 AM to 05:00 PM","Request Cancelled")}))}checktime(){const e=_(),t=_("10:00","HH:mm"),n=_("20:00","HH:mm");return e.isBetween(t,n)}oneDayReturnCheck(e){const t=_(),n=_(new Date(e.issuedtime)).format("YYYY-MM-DD"),s=_(n+" 20:00","YYYY-MM-DD HH:mm").format();return t.isAfter(s)}takeHomeReturnCheck(e){const t=_(),n=_(new Date(e.issuedtime)).add(7,"days").format("YYYY-MM-DD"),s=_(n+" 17:00","YYYY-MM-DD HH:mm").format();return t.isAfter(s)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(b.a),a.Qb(s.C),a.Qb(r.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-user-issue"]],decls:23,vars:4,consts:[[1,"row","col-sm-12"],[1,"col-sm-5"],[2,"height","80vh"],[1,"heading"],[1,"row","col-sm-12",2,"padding","0"],[1,"col-sm-7","offset-1"],[1,"col-sm-3","offset-1"],["outline","danger","style","margin: 0;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-7"],["class","issuetable","style","width: 100%;",4,"ngIf"],["outline","danger",2,"margin","0"],[1,"col-sm-8","tableHead"],[1,"col-sm-4","tableHead"],["nbButton","","status","danger","shape","round","ghost","",3,"click",4,"ngIf"],["nbButton","","status","danger","shape","round","disabled","","ghost","",4,"ngIf"],["nbButton","","status","danger","shape","round","ghost","",3,"click"],["icon","trash-alt","pack","regular"],["nbButton","","status","danger","shape","round","disabled","","ghost",""],[1,"issuetable",2,"width","100%"],[1,"issueHead"],["class","eachIssue",4,"ngFor","ngForOf"],["printNo",""],["noData",""],[1,"eachIssue"],[1,"issueData"],[4,"ngIf","ngIfElse"],[2,"display","flex"],["nbButton","","status","primary","title","Return Book","shape","round","ghost","",3,"click",4,"ngIf"],["nbButton","","status","danger","shape","round","ghost","","disabled","",4,"ngIf"],["icon","check","status","success","pack","solid"],["nbButton","","status","primary","title","Return Book","shape","round","ghost","",3,"click"],["nbButton","","status","danger","shape","round","ghost","","disabled",""],["icon","times","status","danger","pack","solid"]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"nb-card",2),a.Wb(3,"nb-card-header"),a.Wb(4,"div",3),a.Bc(5,"Request List"),a.Vb(),a.Rb(6,"hr"),a.Wb(7,"div",4),a.Wb(8,"div",5),a.Bc(9,"Book"),a.Vb(),a.Wb(10,"div",6),a.Bc(11,"Action"),a.Vb(),a.Vb(),a.Vb(),a.zc(12,oe,2,0,"nb-alert",7),a.Wb(13,"nb-list"),a.zc(14,ae,7,3,"nb-list-item",8),a.Vb(),a.Vb(),a.Vb(),a.Wb(15,"div",9),a.Wb(16,"nb-card",2),a.Wb(17,"nb-card-header"),a.Wb(18,"div",3),a.Bc(19,"My Issue List"),a.Vb(),a.Vb(),a.Wb(20,"nb-card-body"),a.zc(21,ue,2,0,"nb-alert",7),a.zc(22,Ve,19,1,"table",10),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&e&&(a.Eb(12),a.mc("ngIf",0==t.requestList.length),a.Eb(2),a.mc("ngForOf",t.requestList),a.Eb(7),a.mc("ngIf",0==t.issuedList.length),a.Eb(1),a.mc("ngIf",t.issuedList.length>0))},directives:[s.q,s.s,g.m,s.Q,g.l,s.p,s.j,s.R,s.n,s.E],styles:[".heading[_ngcontent-%COMP%]{font-size:17px;text-transform:uppercase}.heading[_ngcontent-%COMP%], .tableHead[_ngcontent-%COMP%]{text-align:center}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%], .issuetable[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.09);border-collapse:collapse;margin-bottom:10px;width:auto}.issueData[_ngcontent-%COMP%], .issueHead[_ngcontent-%COMP%]{text-align:center;padding:15px}.full-width-field[_ngcontent-%COMP%]{width:100%}.eachIssue[_ngcontent-%COMP%]{cursor:pointer}.eachIssue[_ngcontent-%COMP%]:hover{background:hsla(0,0%,50.2%,.15);outline:1px solid #00f}"]}),e})();function Me(e,t){1&e&&(a.Ub(0),a.Rb(1,"ngx-admin-issue"),a.Tb())}function Be(e,t){1&e&&a.Rb(0,"ngx-user-issue")}let ye=(()=>{class e{constructor(e){this.authService=e,this.isadmin=!1,this.authService.isAdmin&&(this.isadmin=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(r.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["ngx-issue"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notAdmin",""]],template:function(e,t){if(1&e&&(a.zc(0,Me,2,0,"ng-container",0),a.zc(1,Be,1,0,"ng-template",null,1,a.Ac)),2&e){const e=a.rc(2);a.mc("ngIf",t.isadmin)("ngIfElse",e)}},directives:[g.m,se,Ce],styles:[""]}),e})();const Oe=[{path:"",component:l,children:[{path:"library",component:H},{path:"profile",component:v,canActivate:[n("XgRA").a]},{path:"issue",component:ye},{path:"miscellaneous",loadChildren:()=>n.e(7).then(n.bind(null,"ivxX")).then(e=>e.MiscellaneousModule)},{path:"",redirectTo:"library",pathMatch:"full"},{path:"**",component:d.a}]}];let we=(()=>{class e{}return e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({factory:function(t){return new(t||e)},imports:[[c.g.forChild(Oe)],c.g]}),e})();n.d(t,"PagesModule",(function(){return Pe}));let Pe=(()=>{class e{}return e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({factory:function(t){return new(t||e)},imports:[[we,i.a,s.V,s.Z,s.t,s.o,s.G,s.db,s.w,s.S,s.kb,s.P,s.A,s.I,s.k,s.X,g.c,m.e,m.p,s.m]]}),e})()},mrSG:function(e,t,n){"use strict";function s(e,t,n,s){return new(n||(n=Promise))((function(i,c){function o(e){try{b(s.next(e))}catch(t){c(t)}}function r(e){try{b(s.throw(e))}catch(t){c(t)}}function b(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}b((s=s.apply(e,t||[])).next())}))}n.d(t,"a",(function(){return s}))},"w+5F":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("fXoL"),i=n("aceb");let c=(()=>{class e{constructor(e){this.menuService=e}goToHome(){this.menuService.navigateHome()}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(i.W))},e.\u0275cmp=s.Kb({type:e,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"nb-card"),s.Wb(3,"nb-card-body"),s.Wb(4,"div",2),s.Wb(5,"h2",3),s.Bc(6,"404 Page Not Found"),s.Vb(),s.Wb(7,"small",4),s.Bc(8,"The page you were looking for doesn't exist"),s.Vb(),s.Wb(9,"button",5),s.ec("click",(function(){return t.goToHome()})),s.Bc(10," Take me home "),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb())},directives:[i.q,i.p,i.n],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e})()}}]);